<!-- Import Polymer -->
<link rel="import" href="../bower_components/polymer/polymer.html">

<!-- Defines element markup -->
<dom-module id="facebook-button">
    <style>
        iframe {
            border: none;
            overflow: hidden;
        }
    </style>
    <template>
        <iframe src$="{{iframeSource(action, colorscheme, font, href, layout, showfaces, height, width)}}" style$="{{iframeStyle(width, height)}}" scrolling="no" frameborder="0" allowTransparency="true"></iframe>
    </template>
</dom-module>

<!-- Registers custom element -->
<script>
    Polymer({
        is         : 'facebook-button',
        properties : {
            action     : {
                type   : String,
                value  : 'like'
            },
            colorscheme: {
                type   : String,
                value  : 'light'
            },
            font       : {
                type   : String,
                value  :'arial'
            },
            href       : {
                type   : String,
                value  : 'http://customelements.io'
            },
            layout     : {
                type   : String,
                value  : 'button_count'
            },
            showfaces  : {
                type   : Boolean,
                value  : false
            },
            height     : {
                type   : Number,
                value  : 20
            },
            width      : {
                type   : Number,
                value  : 120
            }
        },
        iframeSource: function (action, colorscheme, font, href, layout, showfaces, height, width) {

            var param = {
                action : action,
                colorscheme: colorscheme,
                font   : font,
                href   : href,
                layout : layout,
                showfaces  : showfaces,
                height : height,
                width  : width
            };

            var query = [];
            Object.keys(param).forEach(function (key) {
                query.push(key + '=' + encodeURIComponent(param[key]));
            });

            return '//facebook.com/plugins/like.php?' + query.join('&');
        },
        iframeStyle: function (width, height) {
            return 'width:' + width + 'px;' + 'height:' + height + 'px;';
        }
    });
</script>
