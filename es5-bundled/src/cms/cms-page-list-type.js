define(["./cms-login.js"],function(_cmsLogin){"use strict";function _templateObject4_e5925d1045c111e9bac3d12cb7c88f95(){var data=babelHelpers.taggedTemplateLiteral(["<style include=\"cms-comon-style_v3\">\n            :host {\n                position: var(--app-default-position);\n                display: var(--app-block)\n            }\n        </style>\n        <app-route route=\"{{route}}\" pattern=\"/:page\" data=\"{{routeData}}\" tail=\"{{subroute}}\" query-params=\"{{query}}\"\n            active=\"{{active}}\">\n        </app-route>\n        <iron-selector selected=\"[[page]]\" attr-for-selected=\"id\" class=\"drawer-list\" role=\"navigation\">\n            <a id=\"reset\" href=\"[[rootPath]]content/\">\n            </a>\n        </iron-selector>\n        <main class=\"flex\">\n            <div class=\"navbottom\">\n                <nav top>\n                    <app-toolbar typer>\n                        <paper-tabs no-bar>\n                            <iron-selector selected=\"[[page]]\" attr-for-selected=\"name\" class=\"drawer-list\" role=\"navigation\">\n                                <a href=\"[[rootPath]]content/pages/add-category-pages?content=eyJhdXRob3IiOiIiLCJjYXRlZ29yeUNvdW50IjowLCJkYXRlQ3JlYXRlZCI6IiIsImRhdGVQdWJsaXNoZWQiOiIiLCJpbWFnZSI6W3siYXV0aG9yIjoiIiwiZGF0ZUFkZGVkIjoiIiwiZ2FsbGVyeSI6IiIsInRpdGxlIjoiIiwidXJsIjoiIn1dLCJsYW5nIjoicHQiLCJsYXN0TW9kaWZpZWQiOltdLCJuYW1lIjoiIiwicGxhY2Vob2xkZXIiOiIiLCJwdWJsaXNoZWQiOmZhbHNlLCJzdWJDYXRlZ29yeUNvdW50IjowLCJ0aXRsZSI6IiIsInR5cGUiOiJsaXN0IiwidWlkIjoiIn0=&add=true\">\n                                <paper-tab name=\" add-category-pages\">\n                                    [[categorypages]]\n                                    <paper-icon-button-light>\n                                        <iron-icon icon=\"av:library-add\" aria-label=\"categories\"></iron-icon>\n                                    </paper-icon-button-light>\n                                    </paper-tab>\n                                </a>\n                            </iron-selector>\n                        </paper-tabs>\n                    </app-toolbar>\n                </nav>\n                <div bottom>\n                    <section class=\"flexchildbotom\">\n                        <div class=\"flexleft\">\n                            <h3> [[title]] </h3>\n                        </div>\n                    </section>                        \n                        \n                    <section class=\"flexchildbotom\">\n                        <div class=\"flexleft\">\n                            <h3> [[viewedit]] </h3>\n                        </div>\n                    </section>                        \n                    <section class=\"flexchildbotom\">\n                        <div class=\"flexleft\">\n                            <h3> [[published]] </h3>\n                        </div>\n                    </section>                        \n                    <section class=\"flexchildbotom\">\n                        <div class=\"flexleft\">\n                            <h3> [[delete]] </h3>\n                        </div>\n                    </section>\n                </div>\n                <div table>\n                    <dom-repeat items=\"[[pages]]\" as=\"page\">\n                        <template strip-whitespace>\n                            [[putElement(index, page)]]\n                            <slot name=\"item[[index]]\"></slot>\n                        </template>\n                    </dom-repeat>\n                </div>\n                <div content id=\"content\">\n                    <slot name=\"content\"></slot>\n                </div>\n            </div>\n            <nav class=\"navside\">\n                <dom-repeat repeat items=\"[[info]]\" as=\"detail\">\n                    <template>\n                        <div class=\"flexsidecenter\">\n                            <aside>\n                                <span>\n                                    [[Info]] \n                                </span>\n                            </aside>\n                        </div>\n                        <div class=\"navsideleft\">\n                            <aside>\n                                <span>\n                                [[categorycount]]\n                                </span>\n                            </aside>\n                        </div>\n                        <div class=\"navsideright\">\n                            <aside>\n                                <span>\n                                <b> [[detail.categoryCount]] </b>\n                                </span>\n                            </aside>\n                        </div>\n                        <div class=\"navsideleft\">\n                            <aside>\n                                <span>\n                                [[Published]]\n                                </span>\n                            </aside>\n                            <aside>\n                                <span>\n                                [[categorypages]]\n                                </span>\n                            </aside>\n                        </div>\n                        <div rightSide>                            \n                            <dom-repeat repeat items=\"[[detail.published]]\" as=\"published\">\n                                <template>\n                                    <section>\n                                        <aside>\n                                            <span>\n                                                [[published.page]]\n                                            </span>\n                                        </aside>\n                                        <aside>\n                                            <span>\n                                                [[published.datePublished]]\n                                            </span>\n                                        </aside>\n                                    </section>\n                                </template>\n                            </dom-repeat>\n                        </div>\n                    </template>\n                </dom-repeat>\n            </nav>\n        </main> \n        "]);_templateObject4_e5925d1045c111e9bac3d12cb7c88f95=function _templateObject4_e5925d1045c111e9bac3d12cb7c88f95(){return data};return data}function _templateObject3_e5925d1045c111e9bac3d12cb7c88f95(){var data=babelHelpers.taggedTemplateLiteral(["\n        <cms-page-list-item>\n        </cms-page-list-item>"]);_templateObject3_e5925d1045c111e9bac3d12cb7c88f95=function _templateObject3_e5925d1045c111e9bac3d12cb7c88f95(){return data};return data}function _templateObject2_e5925d1045c111e9bac3d12cb7c88f95(){var data=babelHelpers.taggedTemplateLiteral(["\n    <style>    \n    :host {\n        position: relative;\n        display: block;\n    } \n            /* styles reside in cms-content*/\n    </style>        \n    <slot name=\"table\"></slot> \n        "]);_templateObject2_e5925d1045c111e9bac3d12cb7c88f95=function _templateObject2_e5925d1045c111e9bac3d12cb7c88f95(){return data};return data}function _templateObject_e5925d1045c111e9bac3d12cb7c88f95(){var data=babelHelpers.taggedTemplateLiteral(["\n        <article centerListItem slot=\"table\">\n            <div class=\"padding\">\n\n            </div>\n            <div>\n                <paper-icon-button icon=\"image:remove-red-eye\" aria-label=\"mode-show\"></paper-icon-button>\n                    &\n                <paper-icon-button  icon=\"editor:mode-edit\" aria-label=\"mode-edit\"></paper-icon-button>\n            </div>  \n            <div class=\"padding\">\n                \n            </div>  \n            <div>\n                <paper-icon-button icon=\"av:not-interested\" aria-label=\"mode-delete\"></paper-icon-button>        \n            </div>\n        </article>"]);_templateObject_e5925d1045c111e9bac3d12cb7c88f95=function _templateObject_e5925d1045c111e9bac3d12cb7c88f95(){return data};return data}var __DEV=!0,cmsPageListItem=function(_PolymerElement){babelHelpers.inherits(cmsPageListItem,_PolymerElement);function cmsPageListItem(){babelHelpers.classCallCheck(this,cmsPageListItem);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(cmsPageListItem).apply(this,arguments))}babelHelpers.createClass(cmsPageListItem,[{key:"ready",value:function ready(){babelHelpers.get(babelHelpers.getPrototypeOf(cmsPageListItem.prototype),"ready",this).call(this)}},{key:"log",value:function log(data){console.log("log from cms-article-viewer",data)}},{key:"_putRow",value:function _putRow(data){var template=(0,_cmsLogin.html$1)(_templateObject_e5925d1045c111e9bac3d12cb7c88f95());template.content.children[0].children[0].innerHTML="\n            <span> \n                ".concat(this._getPagename(data),"\n            </span>");template.content.children[0].children[2].innerHTML+="\n                <span class=\"".concat(this._getPublished(data),"\"> \n                   <paper-button> ").concat(this._getPublished(data)," </paper-button>\n                </span>");var clone=document.importNode(template.content,!0);this.append(clone);this.children[0].children[1].children[0].addEventListener("click",this.showPage.bind(this));this.children[0].children[1].children[1].addEventListener("click",this.showPage.bind(this));this.children[0].children[2].children[0].addEventListener("click",this._confirmPublish.bind(this));this.children[0].children[3].children[0].addEventListener("click",this._openConfirm.bind(this))}},{key:"_getPagename",value:function _getPagename(cats){return cats.title}},{key:"_getPublished",value:function _getPublished(cats){return cats.published}},{key:"error",value:function error(data){console.error("error from cms-article-viewer",data)}},{key:"deSpin",value:function deSpin(){this.$.spinner.active=!this.$.spinner.active}},{key:"_encodeBase64Url",value:function _encodeBase64Url(str){return str.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=+$/,"")}},{key:"showPage",value:function showPage(){var string=window.btoa("".concat(JSON.stringify(this.page)));window.history.pushState({},null,"content/pages/edit-category-pages?content=".concat(string,"&add=false"));window.dispatchEvent(new CustomEvent("location-changed"))}},{key:"close",value:function close(){var content=this.parentElement.firstElementChild;this.parentElement.showContent();content.set("tada",!0);content.set("content",[])}},{key:"delete",value:function _delete(data){var _this=this,page=data;this.DBW.deletePage(function(msg,done){if("error"!==msg){_this.openConfirm();_this.log(msg)}else{_this.error(msg)}},page,__DEV)}},{key:"_openConfirm",value:function _openConfirm(){var _this2=this;this._changeSectionDebouncer=_cmsLogin.Debouncer.debounce(this._changeSectionDebouncer,_cmsLogin.microTask,function(){_this2.dispatchEvent(new CustomEvent("confirm",{bubbles:!0,composed:!0,detail:{name:_this2._getPagename(_this2.page),method:_this2.delete.bind(_this2)}}))})}},{key:"_confirmPublish",value:function _confirmPublish(){var _this3=this;this._changeSectionDebouncer=_cmsLogin.Debouncer.debounce(this._changeSectionDebouncer,_cmsLogin.microTask,function(){_this3.dispatchEvent(new CustomEvent("confirm",{bubbles:!0,composed:!0,detail:{name:_this3._getPagename(_this3.page),method:_this3.delete.bind(_this3),type:"publish"}}))})}},{key:"resetCollor",value:function resetCollor(data){if("newPage"===data){this.AskPages();this.lastChosen.pop()}}},{key:"setLastChosen",value:function setLastChosen(elem,bool){var arr=[];if("var(--google-blue-700)"===elem.style.color||"rgb(140, 174, 247)"===elem.style.color){elem.style.color=!0===bool?"#f0f0f0":"rgb(128, 152, 173)";this.lastChosen.pop()}else{elem.style.color=!0===bool?"rgb(140, 174, 247)":"var(--google-blue-700)";arr.push(elem);this.lastChosen=arr}}}],[{key:"template",get:function get(){return(0,_cmsLogin.html$1)(_templateObject2_e5925d1045c111e9bac3d12cb7c88f95())}},{key:"is",get:function get(){return"cms-page-list-item"}},{key:"properties",get:function get(){return{DBW:{type:Object,value:function value(){return new _cmsLogin.dataBaseworker},notify:!0},page:{type:Object,notify:!0,observer:"_putRow"}}}}]);return cmsPageListItem}(_cmsLogin.PolymerElement);customElements.define(cmsPageListItem.is,cmsPageListItem);var __DEV$1=!0,_DBW=new _cmsLogin.dataBaseworker,_STYLES=_DBW.getElementAssets("cms-page-list-type",__DEV$1),cmsPageListType=function(_PolymerElement2){babelHelpers.inherits(cmsPageListType,_PolymerElement2);function cmsPageListType(){babelHelpers.classCallCheck(this,cmsPageListType);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(cmsPageListType).apply(this,arguments))}babelHelpers.createClass(cmsPageListType,[{key:"_contentChanged",value:function _contentChanged(){this._debounceEvent=_cmsLogin.Debouncer.debounce(this._debounceEvent,_cmsLogin.microTask,function(){window.dispatchEvent(new CustomEvent("reset-list-type-content",{bubbles:!0,composed:!0,detail:"categorypages"}))});if(this.parentElement){this.parentElement.removeChild(this)}console.log("data")}},{key:"ready",value:function ready(){var _this4=this;babelHelpers.get(babelHelpers.getPrototypeOf(cmsPageListType.prototype),"ready",this).call(this);_STYLES.then(function(querySnapshot){var style=querySnapshot.data();_this4._setLangObject(style)}).catch(function(error){console.error("Error reteaving assets: ",error)});this._askPages();window.addEventListener("reset-list-type",this._contentChanged.bind(this))}},{key:"__changeStyle",value:function __changeStyle(style){this.shadowRoot.firstElementChild.innerText+=style}},{key:"__changeLang",value:function __changeLang(){if(this.langs[this.lang]){var obj=this.langs[this.lang];for(var par in obj){this.set(par,obj[par])}}}},{key:"_setLangObject",value:function _setLangObject(langs){for(var par in langs){if("styles"!==par){this.langs[par]=langs[par].pop()}}this.__changeLang()}},{key:"sendImage",value:function sendImage(data){console.log(data)}},{key:"_cancelImage",value:function _cancelImage(){this.image={}}},{key:"showContent",value:function showContent(){if("block"!==this.$.content.style.display){this.$.content.style.display="block"}else{this.$.content.style.display="none"}}},{key:"_askPages",value:function _askPages(){var _this5=this;this.DBW.askAllPages(function(done){_this5._setAll(done)},__DEV$1)}},{key:"_setAll",value:function _setAll(data){var arr=[],arr2=[];this.set("info",arr);this.pages="";for(var i=0;i<data.length;i++){if("categoryCount"in data[i]){arr.push(data[i])}else{arr2.push(data[i])}}this.set("info",arr);this.set("pages",arr2)}},{key:"putElement",value:function putElement(index,page){var template=(0,_cmsLogin.html$1)(_templateObject3_e5925d1045c111e9bac3d12cb7c88f95()),clone=document.importNode(template.content,!0);this.appendChild(clone);this.children[index].setAttribute("slot","item".concat(index));this.children[index].set("page",page)}},{key:"deSpin",value:function deSpin(data){if(!0===this.$.spinner.active){this.$.spinner.active=!1}}}],[{key:"template",get:function get(){return(0,_cmsLogin.html$1)(_templateObject4_e5925d1045c111e9bac3d12cb7c88f95())}},{key:"is",get:function get(){return"cms-page-list-type"}},{key:"properties",get:function get(){return{DBW:{type:Object,value:function value(){return new _cmsLogin.dataBaseworker},notify:!0},lang:{type:String,observer:"__changeLang"},langs:{type:Object,value:{}},pages:{type:Array,notify:!0},info:{type:Array,notify:!0},categorie:{type:Object,notify:!0},image:{type:Object,notify:!0,observer:"sendImage"},setter:{type:String,notify:!0,observer:"resetCollor"},closed:{type:Boolean,notify:!0},confirm:{type:Boolean,notify:!0,value:!1},setImage:{type:Object}}}}]);return cmsPageListType}(_cmsLogin.PolymerElement);customElements.define(cmsPageListType.is,cmsPageListType)});