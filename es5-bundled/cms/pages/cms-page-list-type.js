define(["../cms-login.js"],function(_cmsLogin){"use strict";function _templateObject3_b7685ed083c411e9b65ecdd08bafc34e(){var data=babelHelpers.taggedTemplateLiteral(["\n        <a href=\"[[rootPath]]content/pages/add-category-pages?content=eyJjb250ZW50VGV4dCI6W3siZGVzY3JpcHRpb24iOiIifV0sImltYWdlIjpbXSwiaW5mbyI6W3siYXV0aG9yIjoiIiwiZGF0ZUFkZGVkIjoiIiwicHVibGlzaGVkQnkiOlt7ImF1dGhvciI6IiIsImRhdGUiOiIiLCJ1aWQiOiIifV0sInVuUHVibGlzaGVkQnkiOlt7ImF1dGhvciI6IiIsImRhdGUiOiIiLCJ1aWQiOiIifV0sImxhc3RNb2RpZmllZCI6W10sImRhdGVQdWJsaXNoZWQiOiJOUCIsInB1Ymxpc2hlZCI6Ik5QIn1dLCJpdGVtcyI6W3siY2F0ZWdvcnlOYW1lIjoiIiwidHlwZSI6IiIsImxhbmciOiIifV0sInN1YkNhdGVnb3JpZXMiOltdfQ==&add=true\">\n            <paper-tab name=\" add-category-pages\">\n            [[ADD]] [[categorypages]]\n                <paper-icon-button-light>\n                    <iron-icon icon=\"av:library-add\" aria-label=\"categories\"></iron-icon>\n                </paper-icon-button-light>\n            </paper-tab>\n        </a>\n        "]);_templateObject3_b7685ed083c411e9b65ecdd08bafc34e=function _templateObject3_b7685ed083c411e9b65ecdd08bafc34e(){return data};return data}function _templateObject2_b7685ed083c411e9b65ecdd08bafc34e(){var data=babelHelpers.taggedTemplateLiteral(["\n        <cms-page-list-item>\n        </cms-page-list-item>"]);_templateObject2_b7685ed083c411e9b65ecdd08bafc34e=function _templateObject2_b7685ed083c411e9b65ecdd08bafc34e(){return data};return data}function _templateObject_b7685ed083c411e9b65ecdd08bafc34e(){var data=babelHelpers.taggedTemplateLiteral(["\n    <style>    \n    :host {\n        position: relative;\n        display: block;\n    } \n            /* styles reside in cms-content*/\n    </style>        \n    <slot name=\"table\"></slot> \n        "]);_templateObject_b7685ed083c411e9b65ecdd08bafc34e=function _templateObject_b7685ed083c411e9b65ecdd08bafc34e(){return data};return data}var cmsPageListItem=/*#__PURE__*/function(_cmsItemTemplate){babelHelpers.inherits(cmsPageListItem,_cmsItemTemplate);function cmsPageListItem(){babelHelpers.classCallCheck(this,cmsPageListItem);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(cmsPageListItem).apply(this,arguments))}babelHelpers.createClass(cmsPageListItem,[{key:"ready",value:function ready(){babelHelpers.get(babelHelpers.getPrototypeOf(cmsPageListItem.prototype),"ready",this).call(this)}},{key:"_putRow",value:function _putRow(data){this.translator.template.innerHTML="\n           <article centerListItem slot=\"table\">\n               <div>   \n                <span> \n                   <paper-button> ".concat(data.items[0].categoryName,"</paper-button>\n                </span>\n               </div>\n               <div>\n                   <paper-button>\n                       <paper-icon-button icon=\"image:remove-red-eye\" aria-label=\"mode-show\"></paper-icon-button>                   \n                       <paper-icon-button  icon=\"editor:mode-edit\" aria-label=\"mode-edit\"></paper-icon-button>\n                   </paper-button> \n               </div>  \n               <div>                   \n                <span> \n                    <paper-button> ").concat(data.items[0].type," </paper-button>\n                </span>\n               </div>   \n               <div class=\"").concat(data.info[0].published,"\">\n                   \n                <span> \n                    <paper-button> ").concat(data.info[0].published," </paper-button>\n                </span>\n               </div>   \n               <div>\n                   <paper-icon-button icon=\"av:not-interested\" aria-label=\"mode-delete\"></paper-icon-button> \n                </div>\n           </article>");this.translator.clone(this);this.children[0].children[1].children[0].addEventListener("click",this.showPage.bind(this));this.children[0].children[3].children[0].addEventListener("click",this._confirmPublish.bind(this));this.children[0].children[4].children[0].addEventListener("click",this._openConfirm.bind(this))}},{key:"_getPagename",value:function _getPagename(cats){return cats}},{key:"error",value:function error(data){console.error("error from cms-article-viewer",data)}},{key:"deSpin",value:function deSpin(){this.$.spinner.active=!this.$.spinner.active}},{key:"showPage",value:function showPage(){var string=window.btoa("".concat(JSON.stringify(this.page)));window.history.pushState({},null,"content/pages/edit-category-pages?content=".concat(string,"&add=false"));window.dispatchEvent(new CustomEvent("location-changed"))}},{key:"__delete",value:function __delete(data){var _this=this;this.translator._DBW.deletePage(function(msg){if("error"!==msg){console.log(msg);_this.__reset()}else{console.error(msg)}},data,this.translator.__DEV)}},{key:"__publish",value:function __publish(data){console.log(data)}},{key:"_openConfirm",value:function _openConfirm(){var _this2=this;this._changeSectionDebouncer=_cmsLogin.Debouncer.debounce(this._changeSectionDebouncer,_cmsLogin.microTask,function(){_this2.dispatchEvent(new CustomEvent("confirm",{bubbles:!0,composed:!0,detail:{name:_this2.page.items[0].categoryName,method:_this2.__delete.bind(_this2),argument:_this2.page.id,headderMsgKind:"delete",type:"categoryPage"}}))})}},{key:"_confirmPublish",value:function _confirmPublish(){var _this3=this;this._changeSectionDebouncer=_cmsLogin.Debouncer.debounce(this._changeSectionDebouncer,_cmsLogin.microTask,function(){_this3.dispatchEvent(new CustomEvent("confirm",{bubbles:!0,composed:!0,detail:{name:_this3.page.name,method:_this3.__publish.bind(_this3),argument:"!!to be done!!",headderMsgKind:"publish",type:"categoryPage"}}))})}},{key:"__reset",value:function __reset(){this._debounceEvent=_cmsLogin.Debouncer.debounce(this._debounceEvent,_cmsLogin.microTask,function(){window.dispatchEvent(new CustomEvent("reset-list-type",{bubbles:!0,composed:!0}))})}}],[{key:"template",get:function get(){return(0,_cmsLogin.html)(_templateObject_b7685ed083c411e9b65ecdd08bafc34e())}},{key:"is",get:function get(){return"cms-page-list-item"}},{key:"properties",get:function get(){return{translator:{type:Object,notify:!0,value:function value(){return MyAppGlobals.translator}}}}}]);return cmsPageListItem}(_cmsLogin.cmsItemTemplate);customElements.define(cmsPageListItem.is,cmsPageListItem);var cmsPageListType=/*#__PURE__*/function(_cmsMiddlePageTemplat){babelHelpers.inherits(cmsPageListType,_cmsMiddlePageTemplat);function cmsPageListType(){babelHelpers.classCallCheck(this,cmsPageListType);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(cmsPageListType).apply(this,arguments))}babelHelpers.createClass(cmsPageListType,[{key:"ready",value:function ready(){babelHelpers.get(babelHelpers.getPrototypeOf(cmsPageListType.prototype),"ready",this).call(this);this.translator.template.innerHTML="<paper-spinner-lite active=\"false\" slot=\"spinner\">\n        </paper-spinner-lite>";this.translator.clone(this);this.translator.target("cms-page-list-type","setLangObject",this._setLObj.bind(this));this.translator.target("cms-page-list-type","changeLang",this._setLang.bind(this),!1);this.translator.shoot("cms-page-list-type","setLangObject");this._askPages();window.addEventListener("reset-list-type",this._contentChanged.bind(this))}},{key:"_setLang",value:function _setLang(res,lang){this.lang=lang;res.call(this)}},{key:"_setLObj",value:function _setLObj(res,querySnapshot){if("data"in querySnapshot){var langs=querySnapshot.data();res.call(this,langs)}}},{key:"__changeLang",value:function __changeLang(){this.lang=this.translator.lang;this.translator.changeLang.call(this)}},{key:"_contentChanged",value:function _contentChanged(){this.innerHTML="";this._askPages()}},{key:"_askPages",value:function _askPages(){var _this4=this;this.translator._DBW.getAllPages(function(done){_this4._setAll(done)},this.translator.__DEV)}},{key:"_setAll",value:function _setAll(data){var arr=[],arr2=[];this.set("inForm",arr);this.pages="";for(var i=0;i<data.length;i++){if("categoryCount"in data[i]){arr.push(data[i])}else{arr2.push(data[i])}}this.set("inForm",arr);this.set("pages",arr2);if(!1===this.spinOut){this.removeChild(this.children[0]);this.spinOut=!0}}},{key:"putElement",value:function putElement(index,page){var template=(0,_cmsLogin.html)(_templateObject2_b7685ed083c411e9b65ecdd08bafc34e()),clone=document.importNode(template.content,!0);this.appendChild(clone);this.children[index].setAttribute("slot","item".concat(index));this.children[index].set("page",page)}},{key:"deSpin",value:function deSpin(data){if(!0===this.$.spinner.active){this.$.spinner.active=!1}}}],[{key:"_getShoutAnchor",get:function get(){return(0,_cmsLogin.html)(_templateObject3_b7685ed083c411e9b65ecdd08bafc34e())}},{key:"is",get:function get(){return"cms-page-list-type"}},{key:"properties",get:function get(){return{lang:{type:String,observer:"__changeLang"},langs:{type:Object,value:{}},translator:{type:Object,notify:!0,value:function value(){return MyAppGlobals.translator}},spinOut:{type:Boolean,value:!1}}}}]);return cmsPageListType}(_cmsLogin.cmsMiddlePageTemplate);customElements.define(cmsPageListType.is,cmsPageListType)});