define(["exports","../cms-login.js"],function(_exports,_cmsLogin){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0});_exports.cmsSubcatsItem=_exports.cmsSubcats=_exports.cmsContentSubcats=_exports.$cmsSubcatsItem=_exports.$cmsSubcats=_exports.$cmsContentSubcats=void 0;function _templateObject8_b79d9fa083c411e9b65ecdd08bafc34e(){var data=babelHelpers.taggedTemplateLiteral(["\n        <div container>\n            <div bottom hidebottom$=\"[[hidebottom]]\">                   \n                <dom-repeat repeat items=\"[[inputVal]]\" as=\"item\">\n                    <template>\n                        <section class=\"flexchildbotomShort\">\n                            <cms-content-item\n                                item=\"[[item]]\" \n                                save-button=\"[[saveButton]]\"\n                                res=\"{{inputResponse}}\">\n                            </cms-content-item>                                    \n                        </section>   \n                    </template>\n                </dom-repeat>        \n                <dom-repeat repeat items=\"[[textareaVal]]\" as=\"item\">\n                    <template>\n                        <section class=\"flexchildbotomFull\">  \n                            <cms-content-text \n                                item=\"[[item]]\" \n                                save-button=\"[[saveButton]]\"\n                                res=\"{{textAreaResponse}}\"> \n                            </cms-content-text>  \n                        </section>\n                    </template>\n                </dom-repeat>                         \n                <section class=\"flexchildbotom\">      \n                    <cms-content-image  id=\"image\"\n                        item-label=\"[[imageLabel]]\"\n                        images=\"[[imageArr]]\"  \n                        _deleteImg=\"[[deleteImg]]\"  \n                    </cms-content-image>\n                </section>\n                <section class=\"flexchildbotomFull\">\n                    <cms-content-subcats id=\"subcats\"\n                        route=\"{{route}}\" \n                        sub-sub-cats=\"[[subSubCats]]\" \n                        res=\"{{subcatsResponse}}\">\n                    </cms-content-subcats>\n                </section>  \n            </div>\n        </div>  "]);_templateObject8_b79d9fa083c411e9b65ecdd08bafc34e=function _templateObject8_b79d9fa083c411e9b65ecdd08bafc34e(){return data};return data}function _templateObject7_b79d9fa083c411e9b65ecdd08bafc34e(){var data=babelHelpers.taggedTemplateLiteral(["\n        <iron-selector selected=\"[[page]]\" attr-for-selected=\"id\" class=\"drawer-list\" role=\"navigation\">\n            <a id=\"anchor\" on-click=\"resetSubcats\">\n                <paper-icon-button icon=\"arrow-back\" aria-label=\"Go back\">\n                </paper-icon-button>\n            </a>\n        </iron-selector>"]);_templateObject7_b79d9fa083c411e9b65ecdd08bafc34e=function _templateObject7_b79d9fa083c411e9b65ecdd08bafc34e(){return data};return data}function _templateObject6_b79d9fa083c411e9b65ecdd08bafc34e(){var data=babelHelpers.taggedTemplateLiteral(["<style include=\"cms-comon-style_v3\">\n        :host {\n            position: relative;\n        }\n        div[scroll]{\n            overflow-x: auto;\n            overflow-y: hidden;\n            margin-bottom: 12px;\n        }\n        div[scroll]::-webkit-scrollbar-track {\n            background-color: var(--app-scrollbar-color)\n        }\n\n        div[scroll]::-webkit-scrollbar {\n            height: 5px\n        }\n\n        div[scroll]::-webkit-scrollbar-thumb {\n            background-color: var(--app-primary-text-color)\n        }\n        div[smaller]{\n            width: 486px;\n        }\n        </style>  \n        <app-route route=\"{{route}}\" pattern=\"/:page\" data=\"{{routeData}}\" tail=\"{{subroute}}\" query-params=\"{{query}}\" active=\"{{active}}\">\n        </app-route>       \n        <section class=\"flexchildbotom3\">\n            <div left name=\"image\">\n                <paper-button>\n                    [[subcatLabel]]\n                </paper-button>\n                <paper-icon-button  name=\"[[itemLabel]]\" icon=\"av:library-add\"  on-click=\"_addSubCategory\" aria-label=\"mode-edit\">\n                </paper-icon-button> \n            </div>\n            <cms-subcats id=\"subcats\" sub-sub-cats=\"{{subSubCats}}\" add=\"{{add}}\">                  \n                <div scroll slot=\"item\">                \n                </div>                 \n            </cms-subcats>\n        </section>\n        "]);_templateObject6_b79d9fa083c411e9b65ecdd08bafc34e=function _templateObject6_b79d9fa083c411e9b65ecdd08bafc34e(){return data};return data}function _templateObject5_b79d9fa083c411e9b65ecdd08bafc34e(){var data=babelHelpers.taggedTemplateLiteral([" \n        <slot name=\"item\"></slot>  \n        <dom-repeat items=\"[[content]]\" as=\"item\">\n            <template>\n                [[_slottItem(item, index)]]\n            </template>                            \n        </dom-repeat>        \n        "]);_templateObject5_b79d9fa083c411e9b65ecdd08bafc34e=function _templateObject5_b79d9fa083c411e9b65ecdd08bafc34e(){return data};return data}function _templateObject4_b79d9fa083c411e9b65ecdd08bafc34e(){var data=babelHelpers.taggedTemplateLiteral(["                          \n            <section class=\"flexchildbotomShort noFlex\">\n                <div class=\"center\">   \n                    <h4 title=\"[[item]]\"> [[item]] </h4>     \n                </div>  \n            </section>\n            <section class=\"flexchildbotomShort noFlex\">\n                <div class=\"center\">   \n                    <h4 title=\"[[title]]\"> [[title]] </h4>     \n                </div>  \n            </section>\n            <section class=\"flexchildbotomShort noFlex\">\n                <div class=\"center\">\n                    <h4 title=\"[[viewedit]]\"> [[viewedit]] </h4>\n                </div>  \n            </section>\n            <section class=\"flexchildbotomShort noFlex\">\n                <div class=\"center\">  \n                    <h4 title=\"[[type]]\"> \n                    [[type]]     </h4>     \n                </div>  \n            </section>\n            <section class=\"flexchildbotomShort noFlex\">\n                <div class=\"center\">  \n                    <h4 title=\"[[delete]]\"> \n                    [[delete]]   </h4>     \n                </div>  \n            </section>"]);_templateObject4_b79d9fa083c411e9b65ecdd08bafc34e=function _templateObject4_b79d9fa083c411e9b65ecdd08bafc34e(){return data};return data}function _templateObject3_b79d9fa083c411e9b65ecdd08bafc34e(){var data=babelHelpers.taggedTemplateLiteral(["        \n        div[bottom]{\n            height: 35px;\n            font-size: var(--app-images-article-font-size);\n            background-color: #e2e2e2;\n           \n        }\n        div[bottom] h4{\n            margin-block-start: 8px;\n        }\n        div[small]{\n            height: 23px;\n            font-size: 9px; \n        }\n        div[table]{\n            overflow-x: hidden;\n        }"]);_templateObject3_b79d9fa083c411e9b65ecdd08bafc34e=function _templateObject3_b79d9fa083c411e9b65ecdd08bafc34e(){return data};return data}function _templateObject2_b79d9fa083c411e9b65ecdd08bafc34e(){var data=babelHelpers.taggedTemplateLiteral(["\n        <dom-if if=\"[[view]]\">\n            <template>\n                <!--dom-repeat repeat items=\"[[subcatContent]]\" as=\"item\">\n                    <template-->                \n                        <article centerlistitem>\n                            <div>\n                                <shop-image class=\"bigger\" title=\"[[item.title]]\" aria-label=\"image\" src=\"[[_getImage()]]\"\n                                    alt=\"[[item.title]]\">\n                                </shop-image>\n                            </div>\n                            <div title=\"[[item.title]]\">\n                                <paper-button title=\"[[item.title]]\">\n                                    [[item.title]]title\n                                </paper-button>\n                            </div>\n                            <div>\n                                <paper-button on-click=\"_viewEdit\">\n                                    <paper-icon-button icon=\"image:remove-red-eye\" aria-label=\"mode-show\"></paper-icon-button>\n                                    <paper-icon-button icon=\"editor:mode-edit\" aria-label=\"mode-edit\"></paper-icon-button>\n                                </paper-button>\n                            </div>\n                            <div title=\"[[item.lang]]\">\n                                <paper-button title=\"[[item.lang]]\">\n                                    [[item.lang]]lang\n                                </paper-button>\n                            </div>\n                            <div>\n                                <paper-icon-button icon=\"av:not-interested\" aria-label=\"delete\" on-click=\"_openConfirm\">\n                                </paper-icon-button>\n                            </div>                \n                        </article>\n                    <!--/template>                            \n                </dom-repeat-->\n            </template>\n        </dom-if>\n        <dom-if if=\"[[!view]]\">\n            <template>\n                <nav>\n                    <paper-button id=\"saveButton\" on-click=\"_viewEdit\"> \n                        [[save]]save\n                    </paper-button>\n                </nav>             \n                <div bottom noborder$=\"[[noborder]]\">\n                    <dom-repeat repeat items=\"[[inputVal]]\" as=\"item\">\n                        <template>                              \n                            <section class=\"flexchildbotomShort\">\n                                <cms-content-item item-input=\"true\"\n                                    item=\"[[item]]\" \n                                    anchor=\"[[anchor]]\" \n                                    save-button=\"[[saveButton]]\"  \n                                    editing=\"{{editing}}\" \n                                    res=\"{{inputResponse}}\"> \n                                </cms-content-item>    \n                            </section> \n                        </template>                            \n                    </dom-repeat>\n                    <dom-repeat repeat items=\"[[textareaVal]]\" as=\"item\">\n                        <template>    \n                            <section class=\"flexchildbotomFull\">                                \n                                <cms-content-item  item-text-area=\"true\"\n                                    item=\"[[item]]\" \n                                    anchor=\"[[anchor]]\" \n                                    save-button=\"[[saveButton]]\"  \n                                    editing=\"{{editing}}\" \n                                    res=\"{{textAreaResponse}}\">\n                                </cms-content-item> \n                            </section> \n                        </template>                            \n                    </dom-repeat>  \n                    <section class=\"flexchildbotom\">   \n                        <cms-content-image  id=\"Imag\"\n                            item-label=\"[[imageLabel]]\"\n                            images=\"[[imageArr]]\" \n                            editing=\"{{editing}}\" \n                            anchor=\"[[anchor]]\" \n                            save-button=\"[[saveButton]]\" \n                            _deleteImg=\"[[deleteImg]]\" >\n                        </cms-content-image>\n                    </section>             \n                </div>\n            </template>\n        </dom-if>\n        <dom-if if=\"[[view]]\">\n            <template>\n                <div bottom > \n                    <div class=\"plus\">\n                        <div class=\"plussubcat noFlex\">\n                            <paper-icon-button icon=\"av:library-add\" aria-label=\"mode-show\"></paper-icon-button>\n                        </div>  \n                        <div class=\"subcat noFlex\">\n                            <div class=\"flexleft\">\n                                <paper-icon-button on-click=\"_toggleChildren\" icon=\"editor:drag-handle\" aria-label=\"mode-show\"></paper-icon-button>\n                            </div>\n\n                            <div class=\"diferent\">\n                                <slot name=\"table\"></slot> \n                            </div>\n\n                            <dom-repeat repeat items=\"[[subcatSubats]]\" as=\"item\">\n                                <template> \n                                    [[_slottItem(item, index)]]\n                                </template>                            \n                            </dom-repeat>               \n                        </div>  \n                    </div> \n                </div>\n            </template>\n        </dom-if>\n        "]);_templateObject2_b79d9fa083c411e9b65ecdd08bafc34e=function _templateObject2_b79d9fa083c411e9b65ecdd08bafc34e(){return data};return data}function _templateObject_b79d9fa083c411e9b65ecdd08bafc34e(){var data=babelHelpers.taggedTemplateLiteral(["\n        <style include=\"cms-comon-style_v3\">    \n            :host {\n                position: relative;\n                display: block;\n            } \n            div[bottom] {\n                padding: 4px;\n                height: auto;\n            }     \n            paper-icon-button {\n                width: 31px;\n                height: 31px;\n            }\n          \n        </style>"]);_templateObject_b79d9fa083c411e9b65ecdd08bafc34e=function _templateObject_b79d9fa083c411e9b65ecdd08bafc34e(){return data};return data}var cmsSubcatsItem=/*#__PURE__*/function(_cmsItemTemplate){babelHelpers.inherits(cmsSubcatsItem,_cmsItemTemplate);function cmsSubcatsItem(){babelHelpers.classCallCheck(this,cmsSubcatsItem);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(cmsSubcatsItem).apply(this,arguments))}babelHelpers.createClass(cmsSubcatsItem,[{key:"ready",value:function ready(){babelHelpers.get(babelHelpers.getPrototypeOf(cmsSubcatsItem.prototype),"ready",this).call(this)}},{key:"_log",value:function _log(data){console.log(data)}},{key:"_toggleChildren",value:function _toggleChildren(evt){var elem=evt.srcElement.parentElement.nextElementSibling;elem.classList.toggle("diferent")}},{key:"_setContent",value:function _setContent(content){if(content.info){this.set("content",content);var obj=this.content.image;this.imageLabel="images";this.set("imageArr",obj);this.set("inputVal",this._getObjArr(this.content.items));this.set("textareaVal",this.content.contentText);this.set("subcatSubats",this.content.subCategories);if(this.$.Imag)this.$.Imag.addImage=this.addImage.bind(this)}}},{key:"_setItemsValue",value:function _setItemsValue(data){if(this.content!==void 0&&this.content.items){for(var par in data){this.content.items[0][par]=data[par];//  console.log(this.content, par)
}}}},{key:"_setContentTextValue",value:function _setContentTextValue(data){if(this.content!==void 0&&this.content.contentText){for(var par in data){this.content.contentText[0][par]=data[par];//console.log(this.content.contentText[0][par], par, data)
}}}},{key:"_pushModel",value:function _pushModel(data){var _this=this;if(!0===data){var subcat=this.subcat;this._reset();setTimeout(function(){subcat.subCategories.push(_this.Modelo);_this.subcat=subcat;_this.add=!1},100)}}},{key:"_slottItem",value:function _slottItem(data,index){var str="\n            <div slot=\"table\"> \n                <cms-subcats-item>\n                </cms-subcats-item>\n            </div>             \n            ";this.translator.template.innerHTML=str;this.translator.clone(this);this.children[this.childElementCount-1].subcat=data;this.children[this.childElementCount-1].toContent=this.toContent;this.indexArr.push(index);this.children[this.childElementCount-1].indexArr=this.indexArr}},{key:"_viewEdit",value:function _viewEdit(){this.view=!this.view}},{key:"_getObjArr",value:function _getObjArr(content){var obj,arr=[];for(var par in content[0]){obj={};obj[par]=content[0][par];arr.push(obj)}return arr}},{key:"_setSaveButton",value:function _setSaveButton(){return this.$.saveButton}},{key:"_setChildrenLang",value:function _setChildrenLang(data){if(0<this.childElementCount){for(var i=0;i<this.childElementCount;i++){this.children[i].children[0].lang=data}}}},{key:"addImage",value:function addImage(){var string="editSubCats&content=".concat(btoa(JSON.stringify(this.content)),"&tocontent=").concat(btoa(JSON.stringify(this.tocontent)),"&indexarr=").concat(this.indexArr);this.set("slashed",!0);window.history.pushState({},null,"".concat(this.rootPath,"media/images/galleries?addimageto=cats&method=").concat(string));window.dispatchEvent(new CustomEvent("location-changed"));window.onbeforeunload=function(e){return"you might have changes to be saved, are you sure you whant to leave?"}}},{key:"_openConfirm",value:function _openConfirm(event){var _this2=this,index=event.srcElement.parentElement.getAttribute("value");this._changeSectionDebouncer=_cmsLogin.Debouncer.debounce(this._changeSectionDebouncer,_cmsLogin.microTask,function(){_this2.dispatchEvent(new CustomEvent("confirm",{bubbles:!0,composed:!0,detail:{name:_this2.content[index].name,method:_this2._deleteImg.bind(_this2),argument:index,headderMsgKind:"delete",type:"article"}}))})}},{key:"__delete",value:function __delete(data){var _this3=this,page=data;this.translator._DBW.deletePage(function(msg){if("error"!==msg){_this3.log(msg)}else{_this3.error(msg)}},page,Consts.__DEV)}}],[{key:"_getStyles",get:function get(){return(0,_cmsLogin.html)(_templateObject_b79d9fa083c411e9b65ecdd08bafc34e())}},{key:"_getElement",get:function get(){return(0,_cmsLogin.html)(_templateObject2_b79d9fa083c411e9b65ecdd08bafc34e())}},{key:"is",get:function get(){return"cms-subcats-item"}},{key:"properties",get:function get(){return{translator:{type:Object,notify:!0,value:function value(){return MyAppGlobals.translator}},inputVal:{type:Array,notify:!0,value:[]},textareaVal:{type:String,notify:!0,value:""},noborder:{type:Boolean,value:!0,reflectToAttribute:!0},inputResponse:{type:Object,notify:!0,value:{},observer:"_setItemsValue"},textAreaResponse:{type:Object,notify:!0,value:{},observer:"_setContentTextValue"},subcat:{type:Object,notify:!0,value:{},observer:"_setContent"},imageArr:{type:Array,notify:!0},subcatContent:{type:Array,notify:!0// coputed: '_setContent(subcat)'
},subcatSubats:{type:Array,notify:!0},saveButton:{type:Object,notify:!0,coputed:"_setSaveButton(subcat)"},toContent:{type:Object,notify:!0},view:{type:Boolean,notify:!0,value:!0},published:{type:String,reflectToAttribute:!0},papgePath:{type:String,value:"edit-articles"},indexArr:{type:Array,value:[]}}}}]);return cmsSubcatsItem}(_cmsLogin.cmsItemTemplate);_exports.cmsSubcatsItem=cmsSubcatsItem;customElements.define(cmsSubcatsItem.is,cmsSubcatsItem);var cmsSubcatsItem$1={cmsSubcatsItem:cmsSubcatsItem};_exports.$cmsSubcatsItem=cmsSubcatsItem$1;var cmsSubcats=/*#__PURE__*/function(_cmsItemImageTemplate){babelHelpers.inherits(cmsSubcats,_cmsItemImageTemplate);function cmsSubcats(){babelHelpers.classCallCheck(this,cmsSubcats);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(cmsSubcats).apply(this,arguments))}babelHelpers.createClass(cmsSubcats,[{key:"connectedCallback",value:function connectedCallback(){var _this4=this;babelHelpers.get(babelHelpers.getPrototypeOf(cmsSubcats.prototype),"connectedCallback",this).call(this);this._observer=new _cmsLogin.FlattenedNodesObserver(this,function(info){_this4.info=info})}},{key:"disconnectedCallback",value:function disconnectedCallback(){babelHelpers.get(babelHelpers.getPrototypeOf(cmsSubcats.prototype),"disconnectedCallback",this).call(this);this._observer.disconnect()}},{key:"ready",value:function ready(){babelHelpers.get(babelHelpers.getPrototypeOf(cmsSubcats.prototype),"ready",this).call(this);window.addEventListener("reset-subcats",this._reset.bind(this));window.addEventListener("reset",this._reset.bind(this));this.translator.target("cms-subcats","setLangObject",this._setLObj.bind(this));this.translator.target("cms-subcats","changeLang",this._setLang.bind(this),!1);this.translator.shoot("cms-subcats","setLangObject")}},{key:"_setLObj",value:function _setLObj(res,querySnapshot){if("data"in querySnapshot){var langs=querySnapshot.data();res.call(this,langs)}}},{key:"_setLang",value:function _setLang(res,lang){this.lang=lang;res.call(this)}},{key:"__changeLang",value:function __changeLang(){this.lang=this.translator.lang;this.translator.changeLang.call(this)}},{key:"_pushModel",value:function _pushModel(data){var _this5=this;if(!0===data){var subcat=this.subSubCats||[];this._reset();setTimeout(function(){subcat.push(_this5.Modelo);_this5.editIndex=subcat.length-1;_this5.subSubCats=subcat;_this5.add=!1},100)}}},{key:"_slottItem",value:function _slottItem(item,index){var str="            \n                <div scroll slot=\"item\">          \n                    <cms-subcats-item article=\"[[item]]\">\n                    </cms-subcats-item>          \n                </div>                \n                ";this.translator.template.innerHTML=str;this.translator.clone(this);this.children[this.childElementCount-1].children[0].model=this.Modelo;this.children[this.childElementCount-1].children[0].view=!0;if(this.editIndex===index)this.children[this.childElementCount-1].children[0].view=!1;this.children[this.childElementCount-1].children[0].lang=this.lang;this.children[this.childElementCount-1].children[0].toContent=this.content;this.children[this.childElementCount-1].children[0].indexArr=[index];this.children[this.childElementCount-1].children[0].subcat=item}},{key:"_setContent",value:function _setContent(data){return data}},{key:"_reset",value:function _reset(){this.editIndex=NaN;this.subSubCats=[];this.add=!1;this.innerHTML="";console.log(this.innerHTML)}}],[{key:"_getStyles",get:function get(){return(0,_cmsLogin.html)(_templateObject3_b79d9fa083c411e9b65ecdd08bafc34e())}},{key:"_getMenu",get:function get(){return(0,_cmsLogin.html)(_templateObject4_b79d9fa083c411e9b65ecdd08bafc34e())}},{key:"_getItem",get:function get(){return(0,_cmsLogin.html)(_templateObject5_b79d9fa083c411e9b65ecdd08bafc34e())}},{key:"is",get:function get(){return"cms-subcats"}},{key:"properties",get:function get(){return{subSubCats:{type:Array,value:[],notify:!0},deleteImg:{type:Object,notify:!0},translator:{type:Object,notify:!0,value:function value(){return MyAppGlobals.translator}},lang:{type:String,value:"",notify:!0,observer:"__changeLang"},langs:{type:Object,value:{}},itemLabel:{type:String,value:"",notify:!0},editIndex:{type:Number},content:{type:Array,value:"",computed:"_setContent(subSubCats)"},add:{type:Boolean,value:!1,notify:!0,observer:"_pushModel"},Modelo:{type:Object,value:{contentText:[{description:""}],image:[],info:[{author:"",dateAdde:"",publishedBy:[{author:"",date:"",uid:""}],unPublishedBy:[{author:"",date:"",uid:""}],lastModified:[{author:"",date:"",uid:""}],datePublished:"NP",published:"NP"}],items:[{categoryName:"",type:"",lang:""}],subCategories:[]},notify:!0},info:{type:Object,value:{}}}}}]);return cmsSubcats}(_cmsLogin.cmsItemImageTemplate);_exports.cmsSubcats=cmsSubcats;customElements.define(cmsSubcats.is,cmsSubcats);var cmsSubcats$1={cmsSubcats:cmsSubcats};_exports.$cmsSubcats=cmsSubcats$1;var cmsContentSubcats=/*#__PURE__*/function(_PolymerElement){babelHelpers.inherits(cmsContentSubcats,_PolymerElement);function cmsContentSubcats(){babelHelpers.classCallCheck(this,cmsContentSubcats);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(cmsContentSubcats).apply(this,arguments))}babelHelpers.createClass(cmsContentSubcats,[{key:"ready",value:function ready(){babelHelpers.get(babelHelpers.getPrototypeOf(cmsContentSubcats.prototype),"ready",this).call(this);this.translator.target("cms-content-image","setLangObject",this._setLObj.bind(this));this.translator.target("cms-content-image","changeLang",this._setLang.bind(this),!1);this.translator.shoot("cms-content-image","setLangObject");window.addEventListener("reset",this._reset.bind(this))}},{key:"_setLObj",value:function _setLObj(res,querySnapshot){if("data"in querySnapshot){var langs=querySnapshot.data();res.call(this,langs)}}},{key:"_setLang",value:function _setLang(res,lang){this.lang=lang;res.call(this)}},{key:"__changeLang",value:function __changeLang(){this.lang=this.translator.lang;this.translator.changeLang.call(this)}},{key:"_addSubCategory",value:function _addSubCategory(){this.add=!0}},{key:"_resetSubCats",value:function _resetSubCats(){this.$.subcats._reset()}},{key:"_log",value:function _log(data){console.log("images",data)}},{key:"_reset",value:function _reset(){this.images=[]}}],[{key:"template",get:function get(){return(0,_cmsLogin.html)(_templateObject6_b79d9fa083c411e9b65ecdd08bafc34e())}},{key:"is",get:function get(){return"cms-content-subcats"}},{key:"properties",get:function get(){return{subSubCats:{type:Array,notify:!0,value:[]},translator:{type:Object,notify:!0,value:function value(){return MyAppGlobals.translator}},lang:{type:String,value:"",notify:!0},langs:{type:Object,value:{}},itemLabel:{type:String,value:"",notify:!0},add:{type:Boolean,value:!1,notify:!0}}}}]);return cmsContentSubcats}(_cmsLogin.PolymerElement);_exports.cmsContentSubcats=cmsContentSubcats;customElements.define(cmsContentSubcats.is,cmsContentSubcats);var cmsContentSubcats$1={cmsContentSubcats:cmsContentSubcats};_exports.$cmsContentSubcats=cmsContentSubcats$1;var Consts$1=new _cmsLogin.Setter;Consts$1.assets=Consts$1.getAssets("cms-page-list-type-content");var cmsPageListTypeContent=/*#__PURE__*/function(_cmsContentTemplate){babelHelpers.inherits(cmsPageListTypeContent,_cmsContentTemplate);function cmsPageListTypeContent(){babelHelpers.classCallCheck(this,cmsPageListTypeContent);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(cmsPageListTypeContent).apply(this,arguments))}babelHelpers.createClass(cmsPageListTypeContent,[{key:"ready",value:function ready(){babelHelpers.get(babelHelpers.getPrototypeOf(cmsPageListTypeContent.prototype),"ready",this).call(this);this.translator.target("cms-page-list-type-content","setLangObject",this._setLObj.bind(this));this.translator.target("cms-page-list-type-content","changeLang",this._setLang.bind(this),!1);this.translator.shoot("cms-page-list-type-content","setLangObject");window.addEventListener("reset",this._reset.bind(this));this.set("saveButton",this.$.saveButton);// this.$.saveButton.classList.remove('diferent')
this.set("anchor",this.$.anchor);this.$.image.addImage=this.addImage.bind(this)}},{key:"_setValues",value:function _setValues(data){console.log(data);this.set("temp",data);for(var par in data){this.set("itemText",data[par])}this._setLabels(data)}},{key:"_setLObj",value:function _setLObj(res,querySnapshot){if("data"in querySnapshot){var langs=querySnapshot.data();res.call(this,langs)}}},{key:"_setLang",value:function _setLang(res,lang){this.lang=lang;res.call(this)}},{key:"__changeLang",value:function __changeLang(){this.lang=this.translator.lang;this.translator.changeLang.call(this)}},{key:"_routePageChanged",value:function _routePageChanged(routeData,query,active){this.cancelElemenObject={};this.inputObject={};if(!1===!!this.slashed){this.slashed=!0}if(!0===active&&"edit-category-pages"===routeData.page||"add-category-pages"===routeData.page||"edit-subcategory-pages"===routeData.page||"add-subcategory-pages"===routeData.page){this.set("content",[]);this.add=!0;if("content"in query){if("added"in query){this.add=!1}if("add"in query){this.add=!0}if("indexarray"in query){//  this.CaTeGoRy = false
}this._setContent(query.content,query)}this.slashed=!1}}},{key:"_setContent",value:function _setContent(content,query){this.$.saveButton.classList.add("diferent");this.$.anchor.setAttribute("href","".concat(this.rootPath,"content/pages"));this.set("content",JSON.parse(window.atob(content)));var obj=this.content.image;this.imageLabel="images";this.set("imageArr",obj);this.set("inputVal",this._getObjArr(this.content.items));this.set("textareaVal",this._getObjArr(this.content.contentText));this.set("inform",this.content.info);this.set("subSubCats",this.content.subCategories);this.set("add","true"===query.add||"true"===query.added);this.set("slashed",!1)}},{key:"addImage",value:function addImage(){var string="editPages&content="+btoa(JSON.stringify(this.content));this.set("slashed",!0);window.history.pushState({},null,"".concat(this.rootPath,"media/images/galleries?addimageto=pages&method=").concat(string));window.dispatchEvent(new CustomEvent("location-changed"));this.$.subcats._resetSubCats();window.onbeforeunload=function(e){return"you might have changes to be saved, are you sure you whant to leave?"}}},{key:"_setItemsValue",value:function _setItemsValue(data){if(this.content.items){for(var par in data){if("undefined"!==par.toString()){this.content.items[0][par]=data[par]}}}}},{key:"_setContentTextValue",value:function _setContentTextValue(data){if(this.content.contentText){for(var par in data){if("undefined"!==par.toString()){this.content.contentText[0][par]=data[par]}}}}},{key:"_setsubcatsValue",value:function _setsubcatsValue(data){if(this.content.subCategories){for(var par in data){if("undefined"!==par.toString()){this.content.subCategories[0][par]=data[par]}}}}},{key:"_getPublishedBy",value:function _getPublishedBy(publishedBy){if(publishedBy!==void 0&&0<publishedBy.length){var pubuser=publishedBy[0].name;return pubuser}}},{key:"save",value:function save(){var data=new Date;this.content.info[0].lastModified.push({uid:this.user.uid,author:this.user.displayName,date:data.toLocaleString().replace(",","")});if(!0===this.add){this.saveAdded(data)}if(!1===this.add){this.saveChanged(data)}}},{key:"saveAdded",value:function saveAdded(data){var _this6=this;this.content.info[0].author=this.user.displayName;this.content.info[0].dateAdded=data.toLocaleString().replace(",","");this.content.info[0].uid=this.user.uid;this.content.id=this.content.items[0].categoryName.split(" ").join("_");Consts$1._DBW.setPages(function(done,err){if("error"!==done){window.onbeforeunload=function(){};_this6.editing=0;_this6.temp="";_this6.$.saveButton.classList.add("diferent");_this6.$.anchor.classList.remove("diferent");//console.log(this.content, this.add)
setTimeout(function(){_this6.__reset()},500)}else{console.log(err)}},this.content,Consts$1.__DEV)}},{key:"saveChanged",value:function saveChanged(){var _this7=this;Consts$1._DBW.changePages(function(done,err){if("error"!==done){window.onbeforeunload=function(){};_this7.editing=0;_this7.temp="";_this7.$.saveButton.classList.add("diferent");_this7.$.anchor.classList.remove("diferent");// console.log(this.content, this.add)
setTimeout(function(){_this7.__reset()},500)}else{console.log(err)}},this.content,Consts$1.__DEV)}},{key:"_reset",value:function _reset(){this.$.anchor.setAttribute("href","".concat(this.rootPath,"content/pages"));this.$.saveButton.classList.add("diferent");this.query={};this.routeData={};this.imageLabel="";this.set("content",[]);this.set("imageArr",[]);this.set("inform",[]);this.set("subCats",[]);this.set("add",0);this.set("slashed",!0);this.set("imageArr",[]);this.set("inputVal",[{reset:!0}]);this.set("textareaVal",[{reset:!0}]);this.set("inform",[]);this.set("subSubCats",[]);this.set("add",0)}},{key:"resetSubcats",value:function resetSubcats(){window.onbeforeunload=function(){};this._debounceEvent=_cmsLogin.Debouncer.debounce(this._debounceEvent,_cmsLogin.microTask,function(){window.dispatchEvent(new CustomEvent("reset-subcats",{bubbles:!0,composed:!0}))});this._reset()}},{key:"__reset",value:function __reset(){this.$.anchor.click();this._debounceEvent=_cmsLogin.Debouncer.debounce(this._debounceEvent,_cmsLogin.microTask,function(){window.dispatchEvent(new CustomEvent("reset-list-type",{bubbles:!0,composed:!0}))})}}],[{key:"_getAnchor",get:function get(){return(0,_cmsLogin.html)(_templateObject7_b79d9fa083c411e9b65ecdd08bafc34e())}},{key:"_getContentItems",get:function get(){return(0,_cmsLogin.html)(_templateObject8_b79d9fa083c411e9b65ecdd08bafc34e())}},{key:"is",get:function get(){return"cms-page-list-type-content"}},{key:"properties",get:function get(){return{user:{type:Object},CaTeGoRy:{type:Boolean,value:!0,notify:!0},inputVal:{type:Array,notify:!0,value:[]},textarea:{type:Boolean,value:!0,notify:!0},textareaVal:{type:String,notify:!0,value:""},imageArr:{type:Array,notify:!0,value:[]},translator:{type:Object,notify:!0,value:function value(){return MyAppGlobals.translator}},lang:{type:String,notify:!0,value:""},langs:{type:Object,value:{}},subSubCats:{type:Array,notify:!0,value:[]},inputResponse:{type:Object,notify:!0,value:{},observer:"_setItemsValue"},textAreaResponse:{type:Object,notify:!0,value:{},observer:"_setContentTextValue"},subcatsResponse:{type:Object,notify:!0,value:{},observer:"_setsubcatsValue"},hidebottom:{type:Boolean,value:!1,reflectToAttribute:!0},content:{type:Object,notify:!0,value:{}},tocontent:{type:Object,notify:!0,value:{}},Model:{type:Object,value:{}}}}},{key:"observers",get:function get(){return["_routePageChanged(routeData, query, active)"]}}]);return cmsPageListTypeContent}(_cmsLogin.cmsContentTemplate);customElements.define(cmsPageListTypeContent.is,cmsPageListTypeContent)});