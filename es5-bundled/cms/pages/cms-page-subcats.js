define(["exports","../cms-login.js"],function(_exports,_cmsLogin){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0/* ignoreName */ /* skipSlots */});_exports.cmsSubcatsItem=_exports.cmsSubcats=_exports.cmsPageSubcats=_exports.$cmsSubcatsItem=_exports.$cmsSubcats=_exports.$cmsPageSubcats=void 0;function _templateObject14_788f9fc0615e11eab834b97a903770ac(){var data=babelHelpers.taggedTemplateLiteral(["\n            <div table class=\"scroll\"> \n                <cms-subcats id=\"subcats\"\n                    sub-sub-cats=\"{{subSubCats}}\"\n                    user=\"{{user}}\"\n                    add=\"{{addSubCategory}}\"\n                    route=\"{{route}}\">      \n                </cms-subcats> \n            </div>\n        "]);_templateObject14_788f9fc0615e11eab834b97a903770ac=function _templateObject14_788f9fc0615e11eab834b97a903770ac(){return data};return data}function _templateObject13_788f9fc0615e11eab834b97a903770ac(){var data=babelHelpers.taggedTemplateLiteral(["              \n        <div class=\"count\">\n            <span> [[subSubCats.length]] </span>\n        </div>               \n        <section class=\"flexchildbotom noFlex\">\n            <div class=\"center\">\n                <h4 title=\"[[viewedit]]\"> [[viewedit]] </h4>\n            </div>\n        </section>                           \n        <section class=\"flexchildbotom noFlex\">\n            <div class=\"center\">\n                <h4 title=\"[[item]]\"> [[item]] </h4>   \n            </div>\n        </section>     \n        <section class=\"flexchildbotom noFlex\">\n            <div class=\"center\">\n                <h4 title=\"[[type]]\"> \n            [[type]]     </h4>     \n        </section>                            \n        <section class=\"flexchildbotom noFlex\">\n            <div class=\"center\">\n                <h4 title=\"[[delete]]\"> \n            [[delete]]   </h4>   \n            </div>\n        </section>"]);_templateObject13_788f9fc0615e11eab834b97a903770ac=function _templateObject13_788f9fc0615e11eab834b97a903770ac(){return data};return data}function _templateObject12_788f9fc0615e11eab834b97a903770ac(){var data=babelHelpers.taggedTemplateLiteral(["       \n            <h3 class=\"higherh3\">[[subcatLabel]]</h3>       \n            <h5 class=\"higherh5\"> category - [[query.content]]  </h5> \n        "]);_templateObject12_788f9fc0615e11eab834b97a903770ac=function _templateObject12_788f9fc0615e11eab834b97a903770ac(){return data};return data}function _templateObject11_788f9fc0615e11eab834b97a903770ac(){var data=babelHelpers.taggedTemplateLiteral(["    \n                <a href=\"\" on-click=\"_addSubCategory\">\n                    <div class=\"add-btn-group\" title=\"[[ADD]]\">\n                        <div class=\"add-btn-group-item group-item-top-left\" ></div>\n\n                        <div class=\"add-btn-group-item group-item-top-right\"></div>\n\n                        <div class=\"add-btn-group-item group-item-bottom-left\"></div>\n\n                        <div class=\"add-btn-group-item group-item-bottom-right\"></div>\n                    </div> \n                </a>            \n        "]);_templateObject11_788f9fc0615e11eab834b97a903770ac=function _templateObject11_788f9fc0615e11eab834b97a903770ac(){return data};return data}function _templateObject10_788f9fc0615e11eab834b97a903770ac(){var data=babelHelpers.taggedTemplateLiteral([""]);_templateObject10_788f9fc0615e11eab834b97a903770ac=function _templateObject10_788f9fc0615e11eab834b97a903770ac(){return data};return data}function _templateObject9_788f9fc0615e11eab834b97a903770ac(){var data=babelHelpers.taggedTemplateLiteral(["<paper-spinner-lite active=\"false\" slot=\"spinner\">"]);_templateObject9_788f9fc0615e11eab834b97a903770ac=function _templateObject9_788f9fc0615e11eab834b97a903770ac(){return data};return data}function _templateObject8_788f9fc0615e11eab834b97a903770ac(){var data=babelHelpers.taggedTemplateLiteral([" \n        \n        <slot name=\"nocontent\"></slot> \n        <dom-repeat items=\"[[subSubCats]]\" as=\"item\">\n            <template>\n                <slot name=\"item[[index]]\">\n                </slot>           \n            </template>                            \n        </dom-repeat>        \n        "]);_templateObject8_788f9fc0615e11eab834b97a903770ac=function _templateObject8_788f9fc0615e11eab834b97a903770ac(){return data};return data}function _templateObject7_788f9fc0615e11eab834b97a903770ac(){var data=babelHelpers.taggedTemplateLiteral([" \n            article[centerlistitem] paper-button{\n                height: auto;\n                max-height: 35px;\n            }\n            \n            div[basis] {\n                flex-basis: 30%;\n            }\n               "]);_templateObject7_788f9fc0615e11eab834b97a903770ac=function _templateObject7_788f9fc0615e11eab834b97a903770ac(){return data};return data}function _templateObject6_788f9fc0615e11eab834b97a903770ac(){var data=babelHelpers.taggedTemplateLiteral(["<h1 slot=\"nocontent\"> no content </h1>"]);_templateObject6_788f9fc0615e11eab834b97a903770ac=function _templateObject6_788f9fc0615e11eab834b97a903770ac(){return data};return data}function _templateObject5_788f9fc0615e11eab834b97a903770ac(){var data=babelHelpers.taggedTemplateLiteral(["<div scroll slot=\"item","\">          \n                                 <cms-subcats-item \n                                    .lang=\"","\" \n                                    .user=\"","\"\n                                    .subcat=\"","\"\n                                    .indexArr=\"","\"\n                                    .route=\"","\" >\n                                 </cms-subcats-item>          \n                             </div> "]);_templateObject5_788f9fc0615e11eab834b97a903770ac=function _templateObject5_788f9fc0615e11eab834b97a903770ac(){return data};return data}function _templateObject4_788f9fc0615e11eab834b97a903770ac(){var data=babelHelpers.taggedTemplateLiteral([""," "]);_templateObject4_788f9fc0615e11eab834b97a903770ac=function _templateObject4_788f9fc0615e11eab834b97a903770ac(){return data};return data}function _templateObject3_788f9fc0615e11eab834b97a903770ac(){var data=babelHelpers.taggedTemplateLiteral([" \n        <style include=\"cms-comon-style_v3\">    \n            :host {\n                position: relative;\n                display: block;\n            } \n            div[bottom] {\n                padding: 4px;\n                height: auto;\n            }     \n            paper-icon-button {\n                width: 31px;\n                height: 31px;\n            }\n            div[bottom]{\n                display: flex;\n            }\n            div[chilssubcat]{\n                border-bottom: 1px dashed #10b6be;;\n            }\n            article[updated]{\n                background-color: var(--app-scrollbar-color);\n            }\n        </style>\n            <slot name=\"spinner\"></slot>\n        <app-route route=\"{{route}}\" pattern=\"/:page\" data=\"{{routeData}}\" tail=\"{{subroute}}\" query-params=\"{{query}}\" active=\"{{active}}\">\n        </app-route>  \n        \n        <dom-repeat repeat items=\"[[subcatContent]]\" as=\"item\">\n            <template>                \n                <article  on-click=\"__changeColorTimeout\" centerlistitem updated$=\"[[updated]]\">  \n                    <div title=\"[[item.categoryName]]\">\n                        <paper-button on-click=\"_viewEdit\" title=\"[[item.categoryName]]\">\n                            [[item.categoryName]]\n                        </paper-button>\n                    </div>\n                    <div title=\"[[item.toArticle]]\" toarticle$=\"[[item.toArticle]]\">\n                        <paper-button title=\"[[item.toArticle]]\"on-click=\"_confirmToArticle\" >\n                            [[item.toArticle]]\n                        </paper-button>\n                    </div>\n                    <div title=\"[[item.Published.state]]\" published$=\"[[item.Published.state]]\">\n                        <paper-button title=\"[[item.Published.state]]\"on-click=\"_confirmPublished\" >\n                            [[item.Published.state]]\n                        </paper-button>\n                    </div>\n                    <div>\n                        <paper-icon-button icon=\"av:not-interested\" aria-label=\"delete\" on-click=\"_openConfirm\">\n                        </paper-icon-button>\n                    </div>                \n                </article>\n            </template>                            \n        </dom-repeat>         \n        <div  bottom>        \n            <div  class=\"plus\">\n                    <div class=\"plussubcat noFlex\">\n                        <paper-icon-button on-click=\"_addChildren\" icon=\"av:library-add\" aria-label=\"mode-show\"></paper-icon-button>\n                    </div>  \n                <div class=\"subcat noFlex\">\n                    <div on-click=\"__changeColorTimeout\" class=\"flexleft\">\n                        <paper-icon-button on-click=\"_toggleChildren\" icon=\"editor:drag-handle\" aria-label=\"mode-show\"></paper-icon-button>\n                    </div>\n                    <div  id=\"subcats\" class=\"diferent\">                            \n                        <dom-repeat repeat items=\"[[subcatSubats]]\" as=\"item\">\n                            <template> \n                                <slot name=\"item[[index]]\"></slot> \n                            </template>                            \n                        </dom-repeat>        \n                    </div>       \n                </div>  \n            </div> \n        </div>\n        "]);_templateObject3_788f9fc0615e11eab834b97a903770ac=function _templateObject3_788f9fc0615e11eab834b97a903770ac(){return data};return data}function _templateObject2_788f9fc0615e11eab834b97a903770ac(){var data=babelHelpers.taggedTemplateLiteral(["\n                                <div slot=\"item","\"> \n                                    <cms-subcats-item \n                                        .lang=\"","\" \n                                        .subcat=\"","\"  \n                                        .route=\"","\">\n                                        .indexArr=\"","\"\n                                    </cms-subcats-item>\n                                </div> "]);_templateObject2_788f9fc0615e11eab834b97a903770ac=function _templateObject2_788f9fc0615e11eab834b97a903770ac(){return data};return data}function _templateObject_788f9fc0615e11eab834b97a903770ac(){var data=babelHelpers.taggedTemplateLiteral([""," "]);_templateObject_788f9fc0615e11eab834b97a903770ac=function _templateObject_788f9fc0615e11eab834b97a903770ac(){return data};return data}var cmsSubcatsItem=/*#__PURE__*/function(_cmscategoriesLib){babelHelpers.inherits(cmsSubcatsItem,_cmscategoriesLib);function cmsSubcatsItem(){babelHelpers.classCallCheck(this,cmsSubcatsItem);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(cmsSubcatsItem).apply(this,arguments))}babelHelpers.createClass(cmsSubcatsItem,[{key:"_log",value:function _log(data){console.log(data)}},{key:"connectedCallback",value:function connectedCallback(){var _this=this;babelHelpers.get(babelHelpers.getPrototypeOf(cmsSubcatsItem.prototype),"connectedCallback",this).call(this);this._observer=new _cmsLogin.FlattenedNodesObserver(this,function(info){_this.info=info})}},{key:"disconnectedCallback",value:function disconnectedCallback(){babelHelpers.get(babelHelpers.getPrototypeOf(cmsSubcatsItem.prototype),"disconnectedCallback",this).call(this);this._observer.disconnect()}},{key:"ready",value:function ready(){var _this2=this;babelHelpers.get(babelHelpers.getPrototypeOf(cmsSubcatsItem.prototype),"ready",this).call(this);this.translator.target("cms-subcats-item","setLangObject",this._setLObj.bind(this));this.translator.target("cms-subcats-item","changeLang",this._setLang.bind(this),/* ignoreName */!1/* skipSlots */ /* skipSlots */);this.translator.shoot("cms-subcats-item","setLangObject");window.addEventListener("changecolor",function(event){_this2.updated=_this2.subcat.id===event.detail.update?!0:!1;setTimeout(function(){_this2.routeData.page="subcategory-pages";if(0<_this2.childElementCount){_this2._subcatAdded(_this2._indexArr)}},125)},!1)}},{key:"_setLObj",value:function _setLObj(res,querySnapshot){if("data"in querySnapshot){var langs=querySnapshot.data();res.call(this,langs)}}},{key:"_setLang",value:function _setLang(res,lang){this.lang=lang;res.call(this)}},{key:"__changeLang",value:function __changeLang(){this.lang=this.translator.lang;this.translator.changeLang.call(this)}},{key:"__publish",value:function __publish(){this.subcat.Published.date=date.toLocaleDateString();this.subcat.Published.publishedBy=this.user.name;this.subcat.Published.state="P";this._publishToArticle()}},{key:"__toArticle",value:function __toArticle(){this.subcat.toArticle="A";var id,category={};this._publishToArticle();id=this.subcat.path.join("-");category.id=this.subcat.path.join("/");category.removed=!1;this.setCategories(id,category)}},{key:"_confirmPublished",value:function _confirmPublished(){var _this3=this;this._changeSectionDebouncer=_cmsLogin.Debouncer.debounce(this._changeSectionDebouncer,_cmsLogin.microTask,function(){_this3.dispatchEvent(new CustomEvent("confirm",{bubbles:!0,composed:!0,detail:{name:_this3.subcat.id,method:_this3.__publish.bind(_this3),// (this.__publish).bind(this),
argument:"!!to be done!!",headderMsgKind:"publish ?",type:"page/sub-category"}}))})}},{key:"_confirmToArticle",value:function _confirmToArticle(){var _this4=this;this._changeSectionDebouncer=_cmsLogin.Debouncer.debounce(this._changeSectionDebouncer,_cmsLogin.microTask,function(){_this4.dispatchEvent(new CustomEvent("confirm",{bubbles:!0,composed:!0,detail:{name:_this4.subcat.id,method:_this4.__toArticle.bind(_this4),argument:"!!to be done!!",headderMsgKind:"send to articles ?",type:"page/sub-category"}}))})}},{key:"_subcatAdded",value:function _subcatAdded(data){if(!!data){if("subcategory-pages"===this.routeData.page){var reset="true"===this.query.reset,parent=this.query.content;this.set("parent",parent);this.set("subCatChildren",this.subcat.children);this.updated=this.subcat.id===this.query.update?!0:!1;if(!!this.query.reset&&!reset)this._setNewUpdated(data);if(!this.query.reset||!!reset)/**/this.getSubcat(this.parent,this.subcat.id)}}}},{key:"_viewEdit",value:function _viewEdit(boll){var pid=this.subcat.id.split("");pid.pop();pid=pid.join("");var arr=[];for(var par in this.content){if("images"!==par){arr.push(par)}}this.subcatLang=arr[0];var string="parent=".concat(this.subcat.id,"&content=").concat(this.subcat.parent,"&topparent=").concat(pid,"&path=").concat(this.subcat.path,"&name=").concat(this.subcat.id,"&top=").concat(this.subcat.top,"&add=false&lang=").concat(this.subcatLang);this.add=!0===babelHelpers.instanceof(boll,MouseEvent)?!1:boll;this._changeColor();window.history.pushState({},null,"".concat(this.rootPath,"content/pages/edit-subcategory-pages?").concat(string));window.dispatchEvent(new CustomEvent("location-changed"))}},{key:"_changeColor",value:function _changeColor(){if(!0===this.updated)this.updated=!1}},{key:"__changeColorTimeout",value:function __changeColorTimeout(){var _this5=this;this.updated=!0;setTimeout(function(){_this5._changeColor()},500)}},{key:"_toggleChildren",value:function _toggleChildren(){var parent=this.query.content;if(!0===this.$.subcats.classList.contains("diferent")){this.$.subcats.classList.remove("diferent");if(!this.subcatSubats&&!!this.subCatChildren&&0<this.subCatChildren.length){if(!!this.parent){this.getChildrenSubcats(parent,this.subcat.children)}}}else{this.$.subcats.classList.add("diferent")}}},{key:"_addChild",value:function _addChild(data){if(!0===data){var name;if(0<this.subcat.removedChildren.length){name="".concat(this._indexArr).concat(this.subcat.children.length+this.subcat.removedChildren.length+1)}else{name="".concat(this._indexArr).concat(this.subcat.children.length)}this.add=!0;var string="".concat(this.rootPath,"content/pages/add-subcategory-pages?content=").concat(this.subcat.parent,"&name=").concat(name,"&parent=").concat(this.subcat.id,"&path=").concat(this.subcat.path,"}&&topparenttype=").concat(this.content[this.catlang].type,"&top=false&add=").concat(this.add);window.history.pushState({},null,string);window.dispatchEvent(new CustomEvent("location-changed"))}}},{key:"__store",value:function __store(){localStorage.setItem("cats-".concat(this.subcat.parent,"-").concat(this.subcat.id),JSON.stringify([this.content]));localStorage.setItem("cats-".concat(this.subcat.parent,"-").concat(this.subcat.id,"-info"),JSON.stringify([this.subcat]))}},{key:"_setContent",value:function _setContent(content){this.set("content",content);this._setsubcatContent();if(this.$.Imag)this.$.Imag.addImage=this.addImage.bind(this);/**/}},{key:"_setsubcatContent",value:function _setsubcatContent(){var arr=[this.subcat];if(!!this.content){if(!!this.content[this.lang]){this.set("catlang",this.lang);arr[0].categoryName=this.content[this.catlang].categoryName;this.set("subcatContent",arr)}else{var keys=Object.keys(this.content),arr2=keys.find(function(item){if("images"!==item)return item});this.set("catlang",arr2);arr[0].categoryName=this.content[this.catlang].categoryName;this.set("subcatContent",arr)}}this.__store()}},{key:"_setNewUpdated",value:function _setNewUpdated(data){var temp,index2=data.length,index;if(!!this.query.update){temp=this.query.update.split("");index=temp.length}/* if (!!this.query.new) {
           temp = this.query.new.split('')
           index = (temp.length)
       }*/if(index>index2){this.__checkBigger(data,temp,index2)}if(index===index2){this.__checkEqual()}}},{key:"_getObjArr",value:function _getObjArr(content){var obj,arr=[];for(var par in content[0]){if("undefined"!==par.toString()&&"image"!==par.toString()){obj={};obj[par]=content[0][par];arr.push(obj)}}return arr}},{key:"_setButtons",value:function _setButtons(data){if(!1===data){this.$.backButton.classList.remove("diferent")}else{this.$.backButton.classList.add("diferent")}}},{key:"_onIndexArr",value:function _onIndexArr(data){return atob(data)}},{key:"_setChildren",value:function _setChildren(data){var _this6=this;if("number"===typeof this.time){clearTimeout(this.time)}this.time=setTimeout(function(){_this6.set("subcatSubats",data)},120)}},{key:"_addChildren",value:function _addChildren(){this._addChild(!0)}},{key:"_slottItem",value:function _slottItem(data){var _this7=this;if("number"===typeof this.time)clearInterval(this.time);this.time=setTimeout(function(){if(!!data){var arr=[atob(_this7.indexArr),index],pageTemplate=function pageTemplate(subcats){return litHtml(_templateObject_788f9fc0615e11eab834b97a903770ac(),subcats.map(function(subcat,idx){return litHtml(_templateObject2_788f9fc0615e11eab834b97a903770ac(),idx,_this7.lang,subcat,_this7.route,btoa(arr.join("")))}))};render(pageTemplate(data),_this7)}},60)}},{key:"_openConfirm",value:function _openConfirm(){var _this8=this;this._changeSectionDebouncer=_cmsLogin.Debouncer.debounce(this._changeSectionDebouncer,_cmsLogin.microTask,function(){_this8.dispatchEvent(new CustomEvent("confirm",{bubbles:!0,composed:!0,detail:{name:_this8.subcatContent[0].categoryName,method:_this8._remove.bind(_this8),argument:{idx:_this8._indexArr,add:_this8.add},headderMsgKind:"delete",type:"sub-category"}}))})}},{key:"_remove",value:function _remove(){var cont,parent=this.query.content,id;if(!1===this.subcat.top){id=this.subcat.id.split("");id.pop();id=id.join("");cont=!1===this.subcat.top?JSON.parse(localStorage["cats-".concat(this.subcat.parent,"-").concat(id,"-info")]):void 0}else{cont=void 0;id=this.subcat.id}this.subcat.removed=!0;this.removeSubcats(cont,parent,id)}}],[{key:"template",get:function get(){return(0,_cmsLogin.html)(_templateObject3_788f9fc0615e11eab834b97a903770ac())}},{key:"is",get:function get(){return"cms-subcats-item"}},{key:"properties",get:function get(){var _ref;return _ref={translator:{type:Object,notify:!0,value:function value(){return MyAppGlobals[window.cms];//MyAppGlobals.translator
}},lang:{type:String,value:"",notify:!0},langs:{type:Object,value:{}},subcat:{type:Object,notify:!0,value:{}},imageArr:{type:Array,notify:!0},subcatContent:{type:Array,notify:!0},subcatSubats:{type:Array,notify:!0,observer:"_slottItem"},published:{type:String,reflectToAttribute:!0},updated:{type:Boolean,reflectToAttribute:!0,notify:!0,value:!1}},babelHelpers.defineProperty(_ref,"published",{type:String,reflectToAttribute:!0,notify:!0,value:""}),babelHelpers.defineProperty(_ref,"toarticle",{type:String,reflectToAttribute:!0,notify:!0,value:""}),babelHelpers.defineProperty(_ref,"onSave",{type:Object,notify:!0,value:{}}),babelHelpers.defineProperty(_ref,"indexArr",{type:Array,notify:!0}),babelHelpers.defineProperty(_ref,"_indexArr",{type:Object,notify:!0,computed:"_onIndexArr(indexArr)",observer:"_subcatAdded"}),babelHelpers.defineProperty(_ref,"dataObj",{type:Array,observer:"_setChildren"}),babelHelpers.defineProperty(_ref,"add",{type:Boolean,value:!0,notify:!0}),babelHelpers.defineProperty(_ref,"spinOut",{type:Boolean,value:!1}),babelHelpers.defineProperty(_ref,"time",Number),_ref}}]);return cmsSubcatsItem}((0,_cmsLogin.cmscategoriesLib)((0,_cmsLogin.cmsSubcatsLib)(_cmsLogin.PolymerElement)));_exports.cmsSubcatsItem=cmsSubcatsItem;customElements.define(cmsSubcatsItem.is,cmsSubcatsItem);var cmsSubcatsItem$1={cmsSubcatsItem:cmsSubcatsItem};_exports.$cmsSubcatsItem=cmsSubcatsItem$1;var Modelo="eyJhdXRob3IiOiIiLCJjaGlsZHJlbiI6W10sImRhdGVDcmVhdGVkIjoiIiwiaWQiOiIiLCJsYXN0TW9kaWZpZWQiOltdLCJwYXJlbnQiOiIiLCJ0b0FydGljbGUiOiIiLCJ0b3AiOiIiLCJjaGlsZHJlbkNvdW50IjowfQ==",cmsSubcats=/*#__PURE__*/function(_cmsItemTemplate){babelHelpers.inherits(cmsSubcats,_cmsItemTemplate);function cmsSubcats(){babelHelpers.classCallCheck(this,cmsSubcats);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(cmsSubcats).apply(this,arguments))}babelHelpers.createClass(cmsSubcats,[{key:"connectedCallback",value:function connectedCallback(){var _this9=this;babelHelpers.get(babelHelpers.getPrototypeOf(cmsSubcats.prototype),"connectedCallback",this).call(this);this._observer=new _cmsLogin.FlattenedNodesObserver(this,function(info){_this9.info=info})}},{key:"disconnectedCallback",value:function disconnectedCallback(){babelHelpers.get(babelHelpers.getPrototypeOf(cmsSubcats.prototype),"disconnectedCallback",this).call(this);this._observer.disconnect()}},{key:"ready",value:function ready(){babelHelpers.get(babelHelpers.getPrototypeOf(cmsSubcats.prototype),"ready",this).call(this)}},{key:"_setLObj",value:function _setLObj(res,querySnapshot){if("data"in querySnapshot){var langs=querySnapshot.data();res.call(this,langs)}}},{key:"_setLang",value:function _setLang(res,lang){this.lang=lang;res.call(this)}},{key:"__changeLang",value:function __changeLang(){this.lang=this.translator.lang;this.translator.changeLang.call(this)}},{key:"_addChild",value:function _addChild(data){if(!!this.children[0]&&"H1"===this.children[0].tagName){this.removeChild(this.children[0])}if(!0===data){var string="".concat(this.rootPath,"content/pages/add-subcategory-pages?content=").concat(this.query.content,"&name=").concat(this.children.length,"&path=").concat(this.query.content,"&add=").concat(this.add,"&top=true");window.history.pushState({},null,string);window.dispatchEvent(new CustomEvent("location-changed"));this.add=!1}}},{key:"_slottItem",value:function _slottItem(data){var _this10=this;if("number"===typeof this.time)clearInterval(this.time);this.time=setTimeout(function(){if(!!data){var pageTemplate=function pageTemplate(pages){return(0,_cmsLogin.html$2)(_templateObject4_788f9fc0615e11eab834b97a903770ac(),pages.map(function(article,idx){return(0,_cmsLogin.html$2)(_templateObject5_788f9fc0615e11eab834b97a903770ac(),idx,_this10.lang,_this10.user,article,btoa(idx),_this10.route)}))};(0,_cmsLogin.render)(pageTemplate(data),_this10)}else{var nocont=function nocont(){return(0,_cmsLogin.html$2)(_templateObject6_788f9fc0615e11eab834b97a903770ac())};(0,_cmsLogin.render)(nocont(),_this10)}},60)}},{key:"_reset",value:function _reset(){this.subSubCats=[];this.add=!1;window.onbeforeunload=function(){}}}],[{key:"_getStyles",get:function get(){return(0,_cmsLogin.html)(_templateObject7_788f9fc0615e11eab834b97a903770ac())}},{key:"_getElement",get:function get(){return(0,_cmsLogin.html)(_templateObject8_788f9fc0615e11eab834b97a903770ac())}},{key:"is",get:function get(){return"cms-subcats"}},{key:"properties",get:function get(){return{subSubCats:{type:Array,observer:"_slottItem",notify:!0},user:{type:Object,value:{}},deleteImg:{type:Object,notify:!0},translator:{type:Object,notify:!0,value:function value(){return MyAppGlobals[window.cms];//.translator
}},lang:{type:String,value:"",notify:!0},langs:{type:Object,value:{}},itemLabel:{type:String,value:"",notify:!0},editIndex:{type:Number},add:{type:Boolean,value:!1,notify:!0,observer:"_addChild"},info:{type:Object,value:{}},onSave:{type:Object,notify:!0,value:{}}}}}]);return cmsSubcats}(_cmsLogin.cmsItemTemplate);_exports.cmsSubcats=cmsSubcats;customElements.define(cmsSubcats.is,cmsSubcats);var cmsSubcats$1={cmsSubcats:cmsSubcats};//import { cmsListTemplate } from '../templates/cms-list-template';
_exports.$cmsSubcats=cmsSubcats$1;var cmsPageSubcats=/*#__PURE__*/function(_cmsSubcatsLib){babelHelpers.inherits(cmsPageSubcats,_cmsSubcatsLib);function cmsPageSubcats(){babelHelpers.classCallCheck(this,cmsPageSubcats);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(cmsPageSubcats).apply(this,arguments))}babelHelpers.createClass(cmsPageSubcats,[{key:"_log",value:function _log(data){console.log(data)}},{key:"ready",value:function ready(){babelHelpers.get(babelHelpers.getPrototypeOf(cmsPageSubcats.prototype),"ready",this).call(this);this.translator.target("cms-subcats","setLangObject",this._setLObj.bind(this));this.translator.target("cms-subcats","changeLang",this._setLang.bind(this),!1);this.translator.shoot("cms-subcats","setLangObject")}},{key:"_setLObj",value:function _setLObj(res,querySnapshot){if("data"in querySnapshot){var langs=querySnapshot.data();res.call(this,langs)}}},{key:"_setLang",value:function _setLang(res,lang){this.lang=lang;res.call(this)}},{key:"__changeLang",value:function __changeLang(){this.lang=this.translator.lang;this.translator.changeLang.call(this)}},{key:"_routePageChanged",value:function _routePageChanged(page,query){var _this11=this;if("number"===typeof this.time)clearInterval(this.time);var reset="true"===query.reset;if("subcategory-pages"===page&&!!query.content){if(!query.reset||!!reset){var parent=query.content;if(this.lastpagesubs===parent&&!query.reset){this.lastpagesubs=atob(localStorage.getItem("lastpagesubs"));return}else if(this.lastpagesubs!==parent||!!reset){var spinnerTemplate=function spinnerTemplate(){return(0,_cmsLogin.html$2)(_templateObject9_788f9fc0615e11eab834b97a903770ac())};(0,_cmsLogin.render)(spinnerTemplate(),this);localStorage.setItem("lastpagesubs",btoa(parent));this.lastpagesubs=parent;this.subSubCats=[];this.time=setTimeout(function(){(0,_cmsLogin.afterNextRender)(_this11,function(){var spinnerOutTemplate=function spinnerOutTemplate(){return(0,_cmsLogin.html$2)(_templateObject10_788f9fc0615e11eab834b97a903770ac())};_this11.getTopSubcats(_this11.lastpagesubs,_cmsLogin.render,spinnerOutTemplate);(0,_cmsLogin.afterNextRender)(_this11,function(){if(!!reset){_this11.time=setTimeout(function(){window.history.pushState({},null,"".concat(_this11.rootPath,"content/pages/subcategory-pages?content=").concat(_this11.query.content));window.dispatchEvent(new CustomEvent("location-changed"))},500)}})})},60)}}else if(!reset){window.dispatchEvent(new CustomEvent("changecolor",{detail:query}));window.history.pushState({},null,"".concat(this.rootPath,"content/pages/subcategory-pages?content=").concat(this.query.content));window.dispatchEvent(new CustomEvent("location-changed"))}}}},{key:"_addSubCategory",value:function _addSubCategory(evt){evt.preventDefault();this.addSubCategory=!0}}],[{key:"_getSilentAnchor",get:function get(){return(0,_cmsLogin.html)(_templateObject11_788f9fc0615e11eab834b97a903770ac())}},{key:"_topLabel",get:function get(){return(0,_cmsLogin.html)(_templateObject12_788f9fc0615e11eab834b97a903770ac())}},{key:"_getBottom",get:function get(){return(0,_cmsLogin.html)(_templateObject13_788f9fc0615e11eab834b97a903770ac())}},{key:"_getTable",get:function get(){return(0,_cmsLogin.html)(_templateObject14_788f9fc0615e11eab834b97a903770ac())}},{key:"is",get:function get(){return"cms-page-subcats"}},{key:"properties",get:function get(){return{content:{type:Array,notify:!0,value:[]},subSubCats:{type:Array,notify:!0},translator:{type:Object,notify:!0,value:function value(){return MyAppGlobals[window.cms];//MyAppGlobals.translator
}},lang:{type:String,value:"",notify:!0},langs:{type:Object,value:{}},itemLabel:{type:String,value:"",notify:!0},lastpagesubs:{type:String,value:"",notify:!0},addSubCategory:{type:Boolean,value:!1,notify:!0},add:Boolean,time:Number}}},{key:"observers",get:function get(){return["_routePageChanged(routeData.page, query)"]}}]);return cmsPageSubcats}((0,_cmsLogin.cmsSubcatsLib)(_cmsLogin.cmsMiddlePageTemplate));_exports.cmsPageSubcats=cmsPageSubcats;customElements.define(cmsPageSubcats.is,cmsPageSubcats);var cmsPageSubcats$1={cmsPageSubcats:cmsPageSubcats};_exports.$cmsPageSubcats=cmsPageSubcats$1});