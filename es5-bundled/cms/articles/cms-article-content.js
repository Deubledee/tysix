define(["exports","../cms-login.js"],function(_exports,_cmsLogin){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0/* ignoreName */ /* skipSlots */});_exports.cmsDropdownMenu=_exports.$cmsDropdownMenu=void 0;var _marked=/*#__PURE__*/regeneratorRuntime.mark(generateAddData),_marked2=/*#__PURE__*/regeneratorRuntime.mark(generateEditData);function _templateObject3_781df230615e11eab834b97a903770ac(){var data=babelHelpers.taggedTemplateLiteral(["\n        <div bottom on-click=\"_seeFlat\">\n            <article>\n                <dom-repeat repeat items=\"[[inputVal]]\" as=\"item\">\n                    <template>\n                        <section class=\"flexchildbotomFull\">\n                            <cms-content-input info=\"*\" editing=\"[[editing]]\" item=\"[[item]]\"\n                                res=\"{{inputResponse}}\">\n                            </cms-content-input>\n                        </section>\n                    </template>\n                </dom-repeat>\n            </article>\n            <article>\n                <dom-repeat repeat items=\"[[textareaVal]]\" as=\"item\">\n                    <template>\n                        <section class=\"flexchildbotomFullExtra\">\n                            <cms-content-textarea info=\"*\" editing=\"[[editing]]\" item=\"[[item]]\"\n                                res=\"{{textAreaResponse}}\">\n                            </cms-content-textarea>\n                        </section>\n                    </template>\n                </dom-repeat>\n            </article>\n        </div>\n\n        <div bottom on-click=\"_seeFlat\">\n            <article class=\"row-layout\" on-click=\"_seeFlat\">\n                <dom-repeat repeat items=\"[[dtDetails]]\" as=\"item\">\n                    <template>\n                        <section on-click=\"_seeFlat\" class=\"flexchildbotomFull flexchild-article\">\n                            <cms-content-input editing=\"[[editing]]\" item=\"[[item]]\"\n                                res=\"{{ifResponse}}\">\n                            </cms-content-input>\n                        </section>\n                    </template>\n                </dom-repeat>\n            </article>\n        </div>\n        \n        <div bottom imageplacer>\n            <section class=\"flexchildbotom\">\n                <cms-content-image id=\"image\" editing=\"[[editing]]\" item-label=\"[[imageLabel]]\" images=\"[[imageArr]]\" _deleteImg=\"[[deleteImg]]\">\n                </cms-content-image>\n            </section>\n        </div>\n\n        <div bottom>     \n            <cms-dropdown-menu \n                items=\"[[categories]]\"  \n                horizontal-align=\"left\" \n                vertical-align=\"top\" \n                scroll-action=\"refit\"\n                res=\"{{catResponse}}\">            \n            </cms-dropdown-menu>       \n        </div>\n\n        <div bottom on-click=\"_seeFlat\">\n            <article class=\"row-layout\" on-click=\"_seeFlat\">\n                <dom-repeat repeat items=\"[[phDetails]]\" as=\"item\">\n                    <template>\n                        <section on-click=\"_seeFlat\" class=\"flexchildbotomFull flexchild-article\">\n                            <cms-content-input editing=\"[[editing]]\" item=\"[[item]]\"\n                                res=\"{{ifResponse}}\">\n                            </cms-content-input>\n                        </section>\n                    </template>\n                </dom-repeat>\n            </article>\n        </div>\n\n        <div bottom on-click=\"_seeFlat\">\n            <article class=\"row-layout\" on-click=\"_seeFlat\">\n                <dom-repeat repeat items=\"[[infoVals]]\" as=\"item\">\n                    <template>\n                        <section on-click=\"_seeFlat\" class=\"flexchildbotomFull flexchild-article\">\n                            <cms-content-input editing=\"[[editing]]\" item=\"[[item]]\"\n                                res=\"{{ifResponse}}\">\n                            </cms-content-input>\n                        </section>\n                    </template>\n                </dom-repeat>\n            </article>\n        </div>\n\n        <div bottom on-click=\"_seeFlat\">\n            <article class=\"row-layout\" on-click=\"_seeFlat\">\n                <dom-repeat repeat items=\"[[shDetails]]\" as=\"item\">\n                    <template>\n                        <section on-click=\"_seeFlat\" class=\"flexchildbotomFull flexchild-article\">\n                            <cms-content-input editing=\"[[editing]]\" item=\"[[item]]\"\n                                res=\"{{ifResponse}}\">\n                            </cms-content-input>\n                        </section>\n                    </template>\n                </dom-repeat>\n            </article>\n        </div>\n\n        <div bottom on-click=\"_seeFlat\">\n            <article on-click=\"_seeFlat\">\n                <dom-repeat repeat items=\"[[keywords]]\" as=\"item\">\n                    <template>\n                        <section on-click=\"_seeFlat\" class=\"flexchildbotomFull\">\n                            <cms-content-textarea info=\"* separete with commas\" editing=\"[[editing]]\" item=\"[[item]]\"\n                                res=\"{{kwResponse}}\">\n                            </cms-content-textarea>\n                        </section>\n                    </template>\n                </dom-repeat>\n            </article>\n        </div>"]);_templateObject3_781df230615e11eab834b97a903770ac=function _templateObject3_781df230615e11eab834b97a903770ac(){return data};return data}function _templateObject2_781df230615e11eab834b97a903770ac(){var data=babelHelpers.taggedTemplateLiteral(["\n        <iron-selector selected=\"[[page]]\" attr-for-selected=\"name\" class=\"drawer-list\" role=\"navigation\">\n            <a id=\"anchora\" on-click=\"reset\">\n                <paper-icon-button icon=\"arrow-back\" aria-label=\"Go back\">\n                </paper-icon-button>\n            </a>\n        </iron-selector>\n        "]);_templateObject2_781df230615e11eab834b97a903770ac=function _templateObject2_781df230615e11eab834b97a903770ac(){return data};return data}function _templateObject_781df230615e11eab834b97a903770ac(){var data=babelHelpers.taggedTemplateLiteral(["\n        div[placerbottom] {\n            overflow: auto;\n        }\n        .row-layout{\n            flex-direction: row!important;\n            flex-flow: wrap;\n            flex-basis: 99%!important;\n        }\n        .flexchild-article {\n            flex-basis: 24%;\n            margin-block-end: 40px;\n            margin-inline-end: 120px;\n        }\n        "]);_templateObject_781df230615e11eab834b97a903770ac=function _templateObject_781df230615e11eab834b97a903770ac(){return data};return data}var cmsDropdownMenu=/*#__PURE__*/function(_cmsDropdownMenuTempl){babelHelpers.inherits(cmsDropdownMenu,_cmsDropdownMenuTempl);function cmsDropdownMenu(){babelHelpers.classCallCheck(this,cmsDropdownMenu);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(cmsDropdownMenu).apply(this,arguments))}babelHelpers.createClass(cmsDropdownMenu,[{key:"_log",value:function _log(data){console.log(data)}},{key:"ready",value:function ready(){babelHelpers.get(babelHelpers.getPrototypeOf(cmsDropdownMenu.prototype),"ready",this).call(this);this.translator.target("cms-content-item","setLangObject",this._setLObj.bind(this));this.translator.target("cms-content-item","changeLang",this._setLang.bind(this),!0);this.translator.shoot("cms-content-item","setLangObject")}},{key:"_setLObj",value:function _setLObj(res,querySnapshot){if("data"in querySnapshot){var langs=querySnapshot.data();res.call(this,langs)}}},{key:"_setLang",value:function _setLang(res,lang){this.lang=lang;res.call(this,this.itemLabel,"title");res.call(this,"cancel","cancel")}},{key:"__changeLang",value:function __changeLang(){this.lang=this.translator.lang;this.translator.changeItemTitleLang.call(this,this.itemLabel,"title");this.translator.changeItemTitleLang.call(this,"cancel","cancel")}},{key:"__setValues",value:function __setValues(data){console.log(data);if(!!data){var obj=data;this.list=data.items;Reflect.deleteProperty(obj,"items");this._setValues(obj);this.__changeLang()}}},{key:"_setValues",value:function _setValues(data){this.temp=this.item;for(var par in data){this.set("itemText",data[par])}this._setLabels(data)}}],[{key:"is",get:function get(){return"cms-dropdown-menu"}},{key:"properties",get:function get(){return{lang:{type:String,notify:!0},langs:{type:Object,value:{}},items:{type:Array,notify:!0,observer:"__setValues"},translator:{type:Object,notify:!0,value:function value(){return MyAppGlobals[window.cms]}}}}}]);return cmsDropdownMenu}(_cmsLogin.cmsDropdownMenuTemplate);_exports.cmsDropdownMenu=cmsDropdownMenu;customElements.define(cmsDropdownMenu.is,cmsDropdownMenu);var cmsDropdownMenu$1={cmsDropdownMenu:cmsDropdownMenu};_exports.$cmsDropdownMenu=cmsDropdownMenu$1;var Modelo="eyJpbWFnZXMiOnsiY29udGVudCI6W119LCJsYW5nIjp7ImFydGljbGVOYW1lIjoiIiwibGFuZyI6IiIsImRlc2NyaXB0aW9uIjoiIiwidHlwZSI6IiJ9fQ==",ModeloInfo="eyJQdWJsaXNoZWQiOiIiLCJSRUYiOiIiLCJTS0EiOiIiLCJhZGRlZEJ5IjoiIiwiYWRkZWREYXRlIjoiIiwiYnJhbmRNYW51ZmFjcnVyZXIiOiIiLCJjYXRlZ29yaWVzIjpbXSwiZGltZW50aW9ucyI6IiIsImtleXdvcmRzIjpbXSwibGFzdE1vZGlmZWlkIjpbXSwicHJpY2UiOiIiLCJwcm9tb3Rpb25Db2RlIjoiIiwicmVtb3ZlZCI6ZmFsc2UsInJldGFpbGVyIjoiIiwic2hpcHBpbmciOiIiLCJzaGlwcGluZ1RheCI6IiIsInN0b2NrIjoiIiwic3RvcmVXYXJyYW50eSI6IiIsInRheCI6IiIsIndlaWdodCI6IiJ9",cmsArticleContent=/*#__PURE__*/function(_cmscategoriesLib){babelHelpers.inherits(cmsArticleContent,_cmscategoriesLib);function cmsArticleContent(){babelHelpers.classCallCheck(this,cmsArticleContent);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(cmsArticleContent).apply(this,arguments))}babelHelpers.createClass(cmsArticleContent,[{key:"ready",value:function ready(){babelHelpers.get(babelHelpers.getPrototypeOf(cmsArticleContent.prototype),"ready",this).call(this);this.translator.target("cms-page-list-type-content","setLangObject",this._setLObj.bind(this));this.translator.target("cms-page-list-type-content","changeLang",this._setLang.bind(this),/* ignoreName */!1/* skipSlots */ /* skipSlots */);this.translator.shoot("cms-page-list-type-content","setLangObject");this.$.image.addImage=this.addImage.bind(this)}},{key:"_setLObj",value:function _setLObj(res,querySnapshot){if("data"in querySnapshot){var langs=querySnapshot.data();res.call(this,langs)}}},{key:"_setLang",value:function _setLang(res,lang){this.lang=lang;res.call(this)}},{key:"__changeLang",value:function __changeLang(){this.lang=this.translator.lang;this.translator.changeLang.call(this)}},{key:"_checkLabel",value:function _checkLabel(){if(!0===this.add){this.translator.changeItemTitleLang.call(this,"addPage","navLabel")}else{this.translator.changeItemTitleLang.call(this,"editPage","navLabel")}}},{key:"_checkIfClose",value:function _checkIfClose(data){if(!1===data&&!0===this.ctnOpened){this.$.closeanchor.click();this.ctnOpened=!1}}},{key:"_routePageChanged",value:function _routePageChanged(path,query){var _this=this;if(!path){if(!!this.ctnOpened){this.ctnOpened=!1;setTimeout(function(){if(!!_this.$.overlay.opened){_this.$.overlay.close();_this.ctnOpened=!1}},500)}}if(!!path){this._reset();this.scrollTo(0,0);if(!!query.add){this.add="true"===query.add}if(!!query.added){this.added="true"===query.added}if("/add-articles"===path||"/edit-articles"===path){if(!this.$.overlay.opened){this.$.overlay.open();this.ctnOpened=!0}if(!!this.langs[this.lang])this._checkLabel();this.closestr="content/articles?reset=false";if("/add-articles"===path){this._setAddedContent();return 0}if("/edit-articles"===path){if(!!query.content){this._setEditContent(query);return 0}}}else{this.$.overlay.close()}}}},{key:"_setAllInfo",value:function _setAllInfo(urlstring,media,infoVals,phDetails,shDetails,dtDetails,categories,keywords,images){this.set("str","content/articles/edit-articles".concat(urlstring,"lang="));this.set("media",media);this.set("imageArr","images"in this.media?this.media.images.content:[]);this.set("infoVals",this._getObjArr(infoVals,!0));this.set("phDetails",this._getObjArr(phDetails,!0));this.set("shDetails",this._getObjArr(shDetails,!0));this.set("dtDetails",this._getObjArr(dtDetails,!0));this._getCatArr(categories);this.set("keywords",[{keywords:keywords.keywords.join(", ")}]);this.imageLabel=images}},{key:"_getCatArr",value:function _getCatArr(categories){var _this2=this;this.getCategories({q:"removed",v:!1}).then(function(data){categories.items=[];data.forEach(function(item){categories.items.push(item.data().id)});_this2.set("categories",categories)}).catch(function(error){console.log(error)})}},{key:"_setAddedContent",value:function _setAddedContent(){var infoVals,media,images,urlstring,phDetails,shDetails,dtDetails,keywords,category,_generateAddData$call=generateAddData.call(this),_generateAddData$call2=babelHelpers.slicedToArray(_generateAddData$call,9);media=_generateAddData$call2[0];infoVals=_generateAddData$call2[1];images=_generateAddData$call2[2];urlstring=_generateAddData$call2[3];phDetails=_generateAddData$call2[4];shDetails=_generateAddData$call2[5];dtDetails=_generateAddData$call2[6];keywords=_generateAddData$call2[7];category=_generateAddData$call2[8];this._setAllInfo(urlstring,media,infoVals,phDetails,shDetails,dtDetails,category,keywords,images)}},{key:"_setEditContent",value:function _setEditContent(query){var arr=[],infoVals,cont,media,images,urlstring,phDetails,shDetails,dtDetails,keywords,category,_generateEditData$cal=generateEditData.call(this,query),_generateEditData$cal2=babelHelpers.slicedToArray(_generateEditData$cal,10);cont=_generateEditData$cal2[0];media=_generateEditData$cal2[1];infoVals=_generateEditData$cal2[2];images=_generateEditData$cal2[3];urlstring=_generateEditData$cal2[4];phDetails=_generateEditData$cal2[5];shDetails=_generateEditData$cal2[6];dtDetails=_generateEditData$cal2[7];keywords=_generateEditData$cal2[8];category=_generateEditData$cal2[9];this._setAllInfo(urlstring,media,infoVals,phDetails,shDetails,dtDetails,category,keywords,images);if(!!query.lang){if("lang"!==query.lang){arr=this._setLangArr(cont);this.set("pageLangs",arr)}this.__setLAng(query.lang,[cont])}}},{key:"__setStorage",value:function __setStorage(){localStorage["article-".concat(this.query.content,"-data")]=JSON.stringify(this.content[0])}},{key:"addImage",value:function addImage(){if(!1===this.add){localStorage["article-".concat(this.query.content,"-media")]=JSON.stringify(this.media);var string="type=article&content=".concat(this.query.content,"&lang=").concat(this.query.lang,"&add=").concat(this.add);window.history.pushState({},null,"".concat(this.rootPath,"media/galleries?").concat(string));window.dispatchEvent(new CustomEvent("location-changed"))}else{localStorage["article-new-content-media"]=JSON.stringify(this.media);var _string="type=article&content=new-content&lang=lang&add=".concat(this.add);window.history.pushState({},null,"".concat(this.rootPath,"media/galleries?").concat(_string));window.dispatchEvent(new CustomEvent("location-changed"))}window.onbeforeunload=function(e){return"you might have changes to be saved, are you sure you whant to leave?"}}},{key:"onSave",value:function onSave(){if(!1===this.add){this.getArticleData(this.inform.id,"info").then(this._save.bind(this)).catch(function(err){return console.log(err)})}else{this._save(void 0)}}},{key:"_save",value:function _save(item){var obj={addedBy:"",addedDate:"",lastModifeid:[]},Cont=!!item&&!!item.data?item.data:obj;this.INFO=this._lastModified(Cont);if(!!this.removelang){this._removeLang();return}if(!this._setAndCheckDataBeforeSave(this.inform))this.add=!0;this.newlangstate=!this.newlangstate;this.saveArticles();return}},{key:"_lastModified",value:function _lastModified(ifo){var INFO=ifo,data=new Date;if(!0===this.add){INFO.addedBy=this.user.name;INFO.addedDate=data}INFO.lastModifeid.push({author:this.user.name,date:data.toLocaleString().replace(",",""),uid:this.user.uid});return INFO}},{key:"_setAndCheckDataBeforeSave",value:function _setAndCheckDataBeforeSave(){if(!this.newlangstate){if(!!this.tempCategory){this.inform.categories.push(this.tempCategory);this.tempCategory=void 0}for(var par in this.media){this.content[0][par]=this.media[par]}if(!0===this.add){if(!this.content[0].lang.lang&&!this.content[0].lang.articleName){return!1}this.content[0][this.content[0].lang.lang]=this.content[0].lang;this.inform.id=this.content[0][this.content[0].lang.lang].articleName.split(" ").join("_").toLowerCase();delete this.content[0].lang;this.inform.removed=!1;this.inform.Published="NP";return!0}return!0}return!1}},{key:"_reset",value:function _reset(){this.set("content",[]);this.set("imageArr",[]);this.set("inputVal","");this.set("infoVals",[]);this.set("media",[]);this.set("dtDetails",[]);this.set("category",[]);this.set("phDetails",[]);this.set("shDetails",[]);this.set("keywords",[]);this.set("textareaVal",[]);this.set("inform",[]);this.newlangstate=!1}}],[{key:"_getStyles",get:function get(){return(0,_cmsLogin.html)(_templateObject_781df230615e11eab834b97a903770ac())}},{key:"_getAnchor",get:function get(){return(0,_cmsLogin.html)(_templateObject2_781df230615e11eab834b97a903770ac())}},{key:"_getContentItems",get:function get(){return(0,_cmsLogin.html)(_templateObject3_781df230615e11eab834b97a903770ac())}},{key:"is",get:function get(){return"cms-article-content"}},{key:"properties",get:function get(){return{user:{type:Object},inputVal:{type:Array,notify:!0,value:[]},textareaVal:{type:Array,notify:!0,value:""},infoVals:{type:Array,notify:!0,value:[]},dtDetails:{type:Array,notify:!0,value:[]},phDetails:{type:Array,notify:!0,value:[]},shDetails:{type:Array,notify:!0,value:""},keywords:{type:Array,notify:!0,value:[]},category:{type:Array,notify:!0,value:""},imageArr:{type:Array,notify:!0,value:[]},translator:{type:Object,notify:!0,value:function value(){return MyAppGlobals[window.cms];//MyAppGlobals.translator
}},lang:{type:String,notify:!0,value:""},langs:{type:Object,value:{}},ctnOpened:{type:Boolean,notify:!0},opened:{type:Boolean,notify:!0,observer:"_checkIfClose"},getdown:{type:Boolean,reflectToAttribute:!0,notify:!0,value:!1},addLangResponse:{type:Object,notify:!0,value:{},observer:"_setAddLangValue"},inputResponse:{type:Object,notify:!0,value:{},observer:"_setItemsValue"},textAreaResponse:{type:Object,notify:!0,value:{},observer:"_setContentTextValue"},ifResponse:{type:Object,notify:!0,value:{},observer:"_setInfomr"},catResponse:{type:Object,notify:!0,value:{},observer:"_setInfomrCat"},kwResponse:{type:Object,notify:!0,value:{},observer:"_setInfomrKw"},content:{type:Object,notify:!0,value:{}},tempCategory:{type:String},langStr:String,time:Number}}},{key:"observers",get:function get(){return["_routePageChanged(route.path, query)"]}}]);return cmsArticleContent}((0,_cmsLogin.cmscategoriesLib)((0,_cmsLogin.cmsArticlesLib)(_cmsLogin.cmsContentTemplate)));customElements.define(cmsArticleContent.is,cmsArticleContent);function generateAddData(){var cont,obj,strg;return regeneratorRuntime.wrap(function generateAddData$(_context){while(1){switch(_context.prev=_context.next){case 0:cont=JSON.parse(atob(Modelo));localStorage["article-new-content-info"]=atob(ModeloInfo);obj=cont.images.content;this._setContent("lang",[cont]);strg=location.search;strg=strg.split("lang=")[0];this.set("pageLangs",[]);//  yield cont
_context.next=9;return obj;case 9:this._getPageInfo("article-new-content-");_context.next=12;return _getInforDetails(this.inform);case 12:_context.next=14;return"images";case 14:_context.next=16;return strg;case 16:_context.next=18;return _getPhysicalDetails(this.inform);case 18:_context.next=20;return _getShippingDEtails(this.inform);case 20:_context.next=22;return _getDetails(this.inform);case 22:_context.next=24;return _getKeywords(this.inform);case 24:_context.next=26;return _getCatDetails(this.inform);case 26:case"end":return _context.stop();}}},_marked,this)}function generateEditData(query){var strg;return regeneratorRuntime.wrap(function generateEditData$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return JSON.parse(localStorage["article-".concat(query.content,"-data")]);case 2:_context2.next=4;return JSON.parse(localStorage["article-".concat(query.content,"-media")]);case 4:this._getPageInfo("article-".concat(query.content,"-"));_context2.next=7;return _getInforDetails(this.inform);case 7:_context2.next=9;return"images";case 9:strg=location.search;strg=strg.split("lang=")[0];_context2.next=13;return strg;case 13:_context2.next=15;return _getPhysicalDetails(this.inform);case 15:_context2.next=17;return _getShippingDEtails(this.inform);case 17:_context2.next=19;return _getDetails(this.inform);case 19:_context2.next=21;return _getKeywords(this.inform);case 21:_context2.next=23;return _getCatDetails(this.inform);case 23:case"end":return _context2.stop();}}},_marked2,this)}function _getInforDetails(details){var infoVals={};for(var par in details){if("REF"===par||"SKA"===par||"brandManufacturer"===par||"promotionCode"===par||"retailer"===par||"storeWarranty"===par){infoVals[par]=details[par]}}return infoVals}function _getPhysicalDetails(details){var phDetails={};for(var par in details){if("dimentions"===par||"weight"===par){phDetails[par]=details[par]}}return phDetails}function _getShippingDEtails(details){var shDEtails={};for(var par in details){if("shipping"===par||"shippingTax"===par){shDEtails[par]=details[par]}}return shDEtails}function _getDetails(details){var dtDetails={};for(var par in details){if("price"===par||"stock"===par||"tax"===par){dtDetails[par]=details[par]}}return dtDetails}function _getCatDetails(details){var catDetails={categories:details.categories};return catDetails}function _getKeywords(details){var keywords={};for(var par in details){if("keywords"===par){keywords[par]=details[par]}}return keywords}});