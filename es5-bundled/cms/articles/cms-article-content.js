define(["../cms-login.js"],function(_cmsLogin){"use strict";function _templateObject3_b7caa31083c411e9b65ecdd08bafc34e(){var data=babelHelpers.taggedTemplateLiteral(["\n        <dom-repeat repeat items=\"[[inform]]\" as=\"cat\">\n            <template>\n                <div class=\"flexsidecenter\">\n                    <aside>\n                        <span>\n                            [[info]]\n                        </span>\n                    </aside>\n                </div>\n                <div class=\"navsideleft\">\n                    <aside>\n                        <span>\n                            [[author]]\n                        </span>\n                    </aside>\n                    <aside>\n                        <span>\n                            [[datecreated]]\n                        </span>\n                    </aside>\n                </div>\n                <div class=\"navsideright\">\n                    <aside>\n                        <span>\n                            [[cat.author]]\n                        </span>\n                    </aside>\n                    <aside>\n                        <span>\n                            [[cat.dateAdded]]\n                        </span>\n                    </aside>\n                </div>\n                <div class=\"navsideleft\">\n                    <aside>\n                        <span>\n                            [[publiShed]]\n                        </span>\n                    </aside>\n                    <aside>\n                        <span>\n                            [[publishedby]]\n                        </span>\n                    </aside>\n                    <aside>\n                        <span>\n                            [[datepublished]]\n                        </span>\n                    </aside>\n                </div>\n                <div class=\"navsideright\">\n                    <aside published$=\"[[cat.published]]\">\n                        <span>\n                            [[cat.published]]\n                        </span>\n                    </aside>\n                    <aside>\n                        <span>\n                            [[ _getPublishedBy(cat.publishedBy)]]\n                        </span>\n                    </aside>\n                    <aside>\n                        <span>\n                            [[cat.datePublished]]\n                        </span>\n                    </aside>\n                </div>\n                <div class=\"flexsidecenter\">\n                    <aside>\n                        <span>\n                            [[lastmodified]]\n                        </span>\n                    </aside>\n                </div>\n                <div class=\"navsideleft\">\n                    <aside>\n                        <span>\n                            [[author]]\n                        </span>\n                    </aside>\n                    <aside>\n                        <span>\n                            [[date]]\n                        </span>\n                    </aside>\n                </div>\n                <div rightSide>\n                    <!--dom-repeat repeat items=\"[[cat.lastModified]]\" as=\"createdAt\">\n                        <template-->\n                            <section>\n                                <aside>\n                                    <span>\n                                        [[createdAt.author]]\n                                    </span>\n                                </aside>\n                                <aside>\n                                    <span>\n                                        [[createdAt.date]]\n                                    </span>\n                                </aside>\n                            </section>\n                        </template>\n                    </dom-repeat>\n                </div>\n            <!--/template>\n        </dom-repeat-->"]);_templateObject3_b7caa31083c411e9b65ecdd08bafc34e=function _templateObject3_b7caa31083c411e9b65ecdd08bafc34e(){return data};return data}function _templateObject2_b7caa31083c411e9b65ecdd08bafc34e(){var data=babelHelpers.taggedTemplateLiteral(["\n        <div container>\n            <div bottom>                   \n                <dom-repeat repeat items=\"[[inputVal]]\" as=\"item\">\n                    <template>\n                        <section class=\"flexchildbotomShort\">\n                            <cms-content-item item-input=\"true\"\n                                item=\"[[item]]\" \n                                anchor=\"[[anchor]]\" \n                                save-button=\"[[saveButton]]\" \n                                lang=\"[[lang]]\"  \n                                editing=\"{{editing}}\" \n                                res=\"{{inputResponse}}\">\n                            </cms-content-item>                                    \n                        </section>   \n                    </template>\n                </dom-repeat>         \n                <dom-repeat repeat items=\"[[textareaVal]]\" as=\"item\">\n                    <template>\n                        <section class=\"flexchildbotomFull\">\n                            <cms-content-text item-text-area=\"true\"\n                                item=\"[[item]]\" \n                                anchor=\"[[anchor]]\" \n                                save-button=\"[[saveButton]]\"  \n                                lang=\"[[lang]]\"  \n                                editing=\"{{editing}}\" \n                                res=\"{{textAreaResponse}}\">\n                            </cms-content-text>            \n                        </section>\n                    </template>\n                </dom-repeat>                          \n                <section class=\"childbotom\">      \n                    <cms-content-image  id=\"imagea\"\n                        item-label=\"[[imageLabel]]\"\n                        images=\"[[imageArr]]\" \n                        editing=\"{{editing}}\" \n                        anchor=\"[[anchor]]\" \n                        save-button=\"[[saveButton]]\" \n                        _deleteImg=\"[[deleteImg]]\"  \n                        lang=\"[[lang]]\" res=\"\">\n                    </cms-content-image>\n                </section>\n            </div>\n        </div>"]);_templateObject2_b7caa31083c411e9b65ecdd08bafc34e=function _templateObject2_b7caa31083c411e9b65ecdd08bafc34e(){return data};return data}function _templateObject_b7caa31083c411e9b65ecdd08bafc34e(){var data=babelHelpers.taggedTemplateLiteral(["\n        <iron-selector selected=\"[[page]]\" attr-for-selected=\"name\" class=\"drawer-list\" role=\"navigation\">\n            <a id=\"anchora\" on-click=\"reset\">\n                <paper-icon-button icon=\"arrow-back\" aria-label=\"Go back\">\n                </paper-icon-button>\n            </a>\n        </iron-selector>\n        "]);_templateObject_b7caa31083c411e9b65ecdd08bafc34e=function _templateObject_b7caa31083c411e9b65ecdd08bafc34e(){return data};return data}var cmsArticleContent=/*#__PURE__*/function(_cmsContentTemplate){babelHelpers.inherits(cmsArticleContent,_cmsContentTemplate);function cmsArticleContent(){babelHelpers.classCallCheck(this,cmsArticleContent);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(cmsArticleContent).apply(this,arguments))}babelHelpers.createClass(cmsArticleContent,[{key:"ready",value:function ready(){babelHelpers.get(babelHelpers.getPrototypeOf(cmsArticleContent.prototype),"ready",this).call(this);this.translator.target("cms-page-list-type-content","setLangObject",this._setLObj.bind(this));this.translator.target("cms-page-list-type-content","changeLang",this._setLang.bind(this),!1);this.translator.shoot("cms-page-list-type-content","setLangObject");window.addEventListener("reset",this.reset.bind(this));this.$.imagea.addImage=this.addImage.bind(this)}},{key:"_setLObj",value:function _setLObj(res,querySnapshot){if("data"in querySnapshot){var langs=querySnapshot.data();res.call(this,langs)}}},{key:"_setLang",value:function _setLang(res,lang){this.lang=lang;res.call(this)}},{key:"__changeLang",value:function __changeLang(){this.lang=this.translator.lang;this.translator.changeLang.call(this)}},{key:"_getPublishedBy",value:function _getPublishedBy(data){if(data!==void 0)return data.author}},{key:"_routePageChanged",value:function _routePageChanged(routeData,query,active){this.cancelElemenObject={};this.inputObject={};if(!0===!!active&&"edit-articles"===routeData.page||"add-articles"===routeData.page){if("added"in query){this.$.saveButton.classList.remove("diferent");this.$.anchora.classList.add("diferent");this.editing=this.editing+1}if("content"in query){this._setContent(query.content,query.add||query.added,query.added)}}}},{key:"_setContent",value:function _setContent(content,add,added){this.$.anchora.href="".concat(this.rootPath,"content/articles/view-articles");//?content=${content}
var parsed=JSON.parse(window.atob(content));if(add!==void 0){this.set("content",parsed);this.imageLabel="images";this.set("imageArr",this.content.image);this.set("inputVal",this._getObjArr(this.content.items));this.set("textareaVal",this.content.contentText);this.set("inform",this.content.info);this.set("add","true"===add);this.set("added","true"===added)}this.slashed=!1}},{key:"addImage",value:function addImage(){var string="editArticles&content="+btoa(JSON.stringify(this.content));this.set("slashed",!0);window.history.pushState({},null,"".concat(this.rootPath,"media/images/galleries?addimageto=articles&method=").concat(string));window.dispatchEvent(new CustomEvent("location-changed"));window.onbeforeunload=function(e){return"you might have changes to be saved, are you sure you whant to leave?"};// this.reset()
}},{key:"_reset",value:function _reset(){this.$.saveButton.classList.add("diferent");this.$.anchora.classList.remove("diferent");this.set("content",[]);this.set("imageArr",[]);this.set("inputVal","");this.set("textareaVal","");this.set("inform",[0]);this.set("add",0)}},{key:"save",value:function save(){var _this=this,content=this.content.pop(),data=new Date,lastModified,author,date;author=!0==="author"in content&&0<content.author.split("").length?content.author:this.user.displayName;date=!0==="dateCreated"in content&&0<content.dateCreated.split("").length?content.dateCreated:data.toLocaleString().replace(",","");lastModified=!0==="lastModified"in content&&0<content.lastModified.length?content.lastModified:[];if(!0===this.add){content.name=content.title.toLocaleLowerCase();content.name=content.name.split(" ").join("_");content.id=content.name;content.uid=this.user.uid;content.author=author;content.dateCreated=date;content.published="NP";lastModified.push({uid:this.user.uid,author:this.user.displayName,date:data.toLocaleString().replace(",","")});content.lastModified=lastModified;var obj2={author:author,content:[],dateCreated:date,id:content.name,items:0,lastModified:lastModified,publishedCount:0,type:content.type,uid:this.user.uid};this.DBW.setArticles(function(done,msg){console.log(done,msg)},obj2,__DEV);window.onbeforeunload=function(){};this.editing=0;this.temp="";this.cancelButton.classList.add("diferent");this.$.saveButton.classList.add("diferent");this.$.anchor.classList.remove("diferent");this.__reset()}else{lastModified.push({uid:this.user.uid,author:this.user.displayName,date:data.toLocaleString().replace(",","")});content.id=content.name;content.uid=this.user.uid;content.author=author;content.dateCreated=date;content.lastModified=lastModified;this.DBW.writePagesContent(function(done,err){if("error"!==done){window.onbeforeunload=function(){};_this.editing=0;_this.temp="";_this.cancelButton.classList.add("diferent");_this.$.saveButton.classList.add("diferent");_this.$.anchor.classList.remove("diferent");_this.__reset()}else{console.log(err)}},content,__DEV)}}},{key:"del",value:function del(index){this.temp.image.data=this.content[0].image;if(!0===babelHelpers.instanceof(this.content[0].image,Array)){if(0<index){this.content[0].image.splice(index,index)}else{this.content[0].image=[]}}else{this.content[0].image=[]}this._setContent(btoa(JSON.stringify(this.content)),"true");if(1>=this.editing){this._reset("image")}else{this.set("par",{});this.editing=this.editing-1}}},{key:"deleteImg",value:function deleteImg(data){console.log(data);if(data!==void 0){this.temp.image={inputing:!1,data:""};this.par="image";this.del(data.index)}}},{key:"cancelImages",value:function cancelImages(){this.imageElement.set("images",this.tempArray);this.imageElement.set("del",!0);this.cancelState();if(!1===this.addingcancel){this.adding=!this.adding}}}],[{key:"_getAnchor",get:function get(){return(0,_cmsLogin.html)(_templateObject_b7caa31083c411e9b65ecdd08bafc34e())}},{key:"_getContentItems",get:function get(){return(0,_cmsLogin.html)(_templateObject2_b7caa31083c411e9b65ecdd08bafc34e())}},{key:"_getSideInfo",get:function get(){return(0,_cmsLogin.html)(_templateObject3_b7caa31083c411e9b65ecdd08bafc34e())}},{key:"is",get:function get(){return"cms-article-content"}},{key:"properties",get:function get(){return{type:{type:String,value:"article",notify:!0},inputVal:{type:Array,notify:!0,value:[]},textareaVal:{type:String,notify:!0,value:""},editing:{type:Number,notify:!0},imageArr:{type:Array,notify:!0,value:[]},translator:{type:Object,notify:!0,value:function value(){return MyAppGlobals.translator}},lang:{type:String,notify:!0},langs:{type:Object,value:{}}}}},{key:"observers",get:function get(){return["_routePageChanged(routeData, query, active)"]}}]);return cmsArticleContent}(_cmsLogin.cmsContentTemplate);customElements.define(cmsArticleContent.is,cmsArticleContent)});