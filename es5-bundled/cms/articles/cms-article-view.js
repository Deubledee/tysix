define(["exports","../cms-login.js"],function(_exports,_cmsLogin){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0});_exports.cmsArticleItem=_exports.$cmsArticleItem=void 0;function _templateObject9_b7bf7f8083c411e9b65ecdd08bafc34e(){var data=babelHelpers.taggedTemplateLiteral(["\n        <dom-repeat repeat items=\"[[info]]\" as=\"detail\">\n            <template>\n                <div class=\"flexsidecenter\">\n                    <aside>\n                        <span>\n                            [[Info]]\n                        </span>\n                    </aside>\n                </div>\n                <div class=\"navsideleft\">\n                    <aside>\n                        <span>\n                        [[Category]]\n                        </span>\n                    </aside>\n                    <aside>\n                        <span>\n                        [[articlecount]]\n                        </span>\n                    </aside>\n                    <aside>\n                        <span>\n                        [[Type]]\n                        </span>\n                    </aside>\n                </div>\n                <div class=\"navsideright\">\n                    <aside>\n                        <span>\n                        <b> [[detail.id]]</b>\n                        </span>\n                    </aside>\n                    <aside>\n                        <span>\n                        <b> [[detail.items]]</b>\n                        </span>\n                    </aside>\n                    <aside>\n                        <span>\n                        <b> [[detail.type]]</b>\n                        </span>\n                    </aside>\n                </div>\n                <div class=\"navsideleft\">\n                    <aside>\n                        <span>\n                        [[Published]]\n                        </span>\n                    </aside>\n                </div>\n                <div class=\"navsideright\">\n                    <aside>\n                        <span>\n                        <b> [[detail.publishedCount]] </b>\n                        </span>\n                    </aside>\n                </div>\n                <div rightSide>                            \n                    <dom-repeat repeat items=\"[[detail.published]]\" as=\"published\">\n                        <template>\n                            <section>\n                                <aside>\n                                    <span>\n                                        [[published.article]]\n                                    </span>\n                                </aside>\n                                <aside>\n                                    <span>\n                                        [[published.datePublished]]\n                                    </span>\n                                </aside>\n                            </section>\n                        </template>\n                    </dom-repeat>\n                </div>\n            </template>\n        </dom-repeat>\n        "]);_templateObject9_b7bf7f8083c411e9b65ecdd08bafc34e=function _templateObject9_b7bf7f8083c411e9b65ecdd08bafc34e(){return data};return data}function _templateObject8_b7bf7f8083c411e9b65ecdd08bafc34e(){var data=babelHelpers.taggedTemplateLiteral(["\n        <div table> \n            <dom-repeat items=\"[[contents]]\" as=\"item\">\n                <template>\n                    <cms-article article=\"[[item]]\" route=\"[[routeData]]\" lang=\"[[lang]]\">\n                    </cms-article>\n                </template>\n            </dom-repeat>\n        </div>    "]);_templateObject8_b7bf7f8083c411e9b65ecdd08bafc34e=function _templateObject8_b7bf7f8083c411e9b65ecdd08bafc34e(){return data};return data}function _templateObject7_b7bf7f8083c411e9b65ecdd08bafc34e(){var data=babelHelpers.taggedTemplateLiteral(["\n        <iron-selector selected=\"[[page]]\" attr-for-selected=\"id\" class=\"drawer-list\" role=\"navigation\">\n            <a href=\"[[rootPath]][[url]]\">\n                <paper-tab name=\" add-category-pages\">\n                    <span class=\"spanpadding\"> \n                    [[ADD]] [[articles]] \n                    </span>\n                    <paper-icon-button-light>\n                        <iron-icon icon=\"av:library-add\" aria-label=\"categories\"></iron-icon>\n                    </paper-icon-button-light>\n                </paper-tab>\n            </a>\n        </iron-selector>\n        "]);_templateObject7_b7bf7f8083c411e9b65ecdd08bafc34e=function _templateObject7_b7bf7f8083c411e9b65ecdd08bafc34e(){return data};return data}function _templateObject6_b7bf7f8083c411e9b65ecdd08bafc34e(){var data=babelHelpers.taggedTemplateLiteral(["        \n            <iron-selector selected=\"[[page]]\" attr-for-selected=\"id\" class=\"drawer-list\" role=\"navigation\">\n                <a id=\"reset\" href=\"[[rootPath]]content/articles\">\n                    <paper-icon-button  icon=\"arrow-back\" aria-label=\"Go back\">\n                    </paper-icon-button>\n                </a>\n            </iron-selector>"]);_templateObject6_b7bf7f8083c411e9b65ecdd08bafc34e=function _templateObject6_b7bf7f8083c411e9b65ecdd08bafc34e(){return data};return data}function _templateObject5_b7bf7f8083c411e9b65ecdd08bafc34e(){var data=babelHelpers.taggedTemplateLiteral([" \n        <dom-repeat repeat items=\"[[content]]\" as=\"item\">\n            <template>\n                <cms-article-item article=\"[[item]]\">\n                </cms-article-item>\n            </template>                            \n        </dom-repeat>"]);_templateObject5_b7bf7f8083c411e9b65ecdd08bafc34e=function _templateObject5_b7bf7f8083c411e9b65ecdd08bafc34e(){return data};return data}function _templateObject4_b7bf7f8083c411e9b65ecdd08bafc34e(){var data=babelHelpers.taggedTemplateLiteral(["                           \n            <section class=\"flexchildbotom noFlex\">\n                <div class=\"center\">   \n                    <h4 title=\"[[item]]\">  [[item]]   </h4>     \n                </div>  \n            </section>\n            <section class=\"flexchildbotom noFlex\">\n                <div class=\"center\">   \n                    <h4 title=\"[[title]]\"> \n                    [[title]]    </h4>     \n                </div>  \n            </section>\n            <section class=\"flexchildbotom noFlex\">\n                <div class=\"center\">\n                    <h4 title=\"[[viewedit]]\"> [[viewedit]] </h4>\n                </div>  \n            </section>\n            <section class=\"flexchildbotom noFlex\">\n                <div class=\"center\">   \n                    <h4 title=\"[[stock]]\"> \n                    [[stock]]    </h4>     \n                </div>  \n            </section>\n            <section class=\"flexchildbotom noFlex\">\n                <div class=\"center\">  \n                    <h4 title=\"[[type]]\"> \n                    [[type]]     </h4>     \n                </div>  \n            </section>\n            <section class=\"flexchildbotom noFlex\">\n                <div class=\"center\">  \n                    <h4 title=\"[[published]]\"> \n                    [[published]] </h4>     \n                </div>  \n            </section>\n            <section class=\"flexchildbotom noFlex\">\n                <div class=\"center\">  \n                    <h4 title=\"[[delete]]\"> \n                    [[delete]]      </h4>     \n                </div>  \n            </section>"]);_templateObject4_b7bf7f8083c411e9b65ecdd08bafc34e=function _templateObject4_b7bf7f8083c411e9b65ecdd08bafc34e(){return data};return data}function _templateObject3_b7bf7f8083c411e9b65ecdd08bafc34e(){var data=babelHelpers.taggedTemplateLiteral(["        \n        div[arow]{\n            height: 35px;\n            font-size: var(--app-images-article-font-size);\n           /* background-color: var(--app-secondary-text-color);*/\n        }\n        div[arow] h4{\n            margin-block-start: 8px;\n        }\n        "]);_templateObject3_b7bf7f8083c411e9b65ecdd08bafc34e=function _templateObject3_b7bf7f8083c411e9b65ecdd08bafc34e(){return data};return data}function _templateObject2_b7bf7f8083c411e9b65ecdd08bafc34e(){var data=babelHelpers.taggedTemplateLiteral(["\n        <dom-repeat repeat items=\"[[content]]\" as=\"item\">\n            <template>                \n                <article centerlistitem>\n                    <div>\n                        <shop-image class=\"bigger\" title=\"[[item.title]]\" aria-label=\"image\" src=\"[[_getImage()]]\"\n                            alt=\"[[item.title]]\">\n                        </shop-image>\n                    </div>\n                    <div title=\"[[item.title]]\">\n                        <paper-button title=\"[[item.title]]\">\n                            [[item.title]]\n                        </paper-button>\n                    </div>\n                    <div>\n                        <paper-button on-click=\"_showPage\">\n                            <paper-icon-button icon=\"image:remove-red-eye\" aria-label=\"mode-show\"></paper-icon-button>\n                            <paper-icon-button icon=\"editor:mode-edit\" aria-label=\"mode-edit\"></paper-icon-button>\n                        </paper-button>\n                    </div>\n                    <div class=\"paddingSmall\" title=\"[[item.stock]]\">\n                        <h3 title=\"[[item.stock]]\">\n                            [[item.stock]]\n                        </h3>\n                    </div>\n                    <div title=\"[[item.page]]\">\n                        <paper-button title=\"[[item.page]]\">\n                            [[item.type]]\n                        </paper-button>\n                    </div>\n                    <div published$=\"[[_getPublished()]]\" title=\"[[_getPublished()]]\" on-click=\"_confirmPublish\">\n                        <paper-button title=\"[[_getPublished()]]\">\n                            [[_getPublished()]]\n                        </paper-button>\n                    </div>\n                    <div>\n                        <paper-icon-button icon=\"av:not-interested\" aria-label=\"delete\" on-click=\"_openConfirm\">\n                        </paper-icon-button>\n                    </div>\n                \n                </article>\n            </template>                            \n        </dom-repeat>\n        "]);_templateObject2_b7bf7f8083c411e9b65ecdd08bafc34e=function _templateObject2_b7bf7f8083c411e9b65ecdd08bafc34e(){return data};return data}function _templateObject_b7bf7f8083c411e9b65ecdd08bafc34e(){var data=babelHelpers.taggedTemplateLiteral(["\n        <style include=\"cms-comon-style_v3\">    \n        :host {\n            position: relative;\n            display: block;\n        } \n        shop-image{\n            top: 1px; \n        }\n        </style> "]);_templateObject_b7bf7f8083c411e9b65ecdd08bafc34e=function _templateObject_b7bf7f8083c411e9b65ecdd08bafc34e(){return data};return data}var cmsArticleItem=/*#__PURE__*/function(_cmsItemTemplate){babelHelpers.inherits(cmsArticleItem,_cmsItemTemplate);function cmsArticleItem(){babelHelpers.classCallCheck(this,cmsArticleItem);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(cmsArticleItem).apply(this,arguments))}babelHelpers.createClass(cmsArticleItem,[{key:"ready",value:function ready(){babelHelpers.get(babelHelpers.getPrototypeOf(cmsArticleItem.prototype),"ready",this).call(this)}},{key:"_putRow",value:function _putRow(item){if(item.image){this.set("content",item.items);this.set("images",item.image);this.set("info",item.info)}}},{key:"_showPage",value:function _showPage(){var string=window.btoa("".concat(JSON.stringify(this.article)));window.history.pushState({},null,"".concat(this.rootPath,"content/articles/edit-articles?content=").concat(string,"&add=false"));window.dispatchEvent(new CustomEvent("location-changed"))}},{key:"_getParameter",value:function _getParameter(item){return item}},{key:"_getImage",value:function _getImage(){return this.images[0].url}},{key:"_getPublished",value:function _getPublished(){return this.info[0].published}},{key:"_openConfirm",value:function _openConfirm(event){var _this=this,index=event.srcElement.parentElement.getAttribute("value");this._changeSectionDebouncer=_cmsLogin.Debouncer.debounce(this._changeSectionDebouncer,_cmsLogin.microTask,function(){_this.dispatchEvent(new CustomEvent("confirm",{bubbles:!0,composed:!0,detail:{name:_this.content[index].name,method:_this._deleteImg.bind(_this),argument:index,headderMsgKind:"delete",type:"article"}}))})}},{key:"_confirmPublish",value:function _confirmPublish(event){var _this2=this,index=event.srcElement.parentElement.getAttribute("value");this._changeSectionDebouncer=_cmsLogin.Debouncer.debounce(this._changeSectionDebouncer,_cmsLogin.microTask,function(){_this2.dispatchEvent(new CustomEvent("confirm",{bubbles:!0,composed:!0,detail:{name:_this2.content[index].name,method:_this2.__publish.bind(_this2),argument:index,headderMsgKind:"publish",type:"article"}}))})}},{key:"__delete",value:function __delete(data){var _this3=this,page=data;this.translator._DBW.deletePage(function(msg){if("error"!==msg){_this3.log(msg)}else{_this3.error(msg)}},page,this.translator.__DEV)}},{key:"__publish",value:function __publish(){console.log("!!to be done!!")}}],[{key:"_getStyles",get:function get(){return(0,_cmsLogin.html)(_templateObject_b7bf7f8083c411e9b65ecdd08bafc34e())}},{key:"_getElement",get:function get(){return(0,_cmsLogin.html)(_templateObject2_b7bf7f8083c411e9b65ecdd08bafc34e())}},{key:"is",get:function get(){return"cms-article-item"}},{key:"properties",get:function get(){return{article:{type:Object,notify:!0,observer:"_putRow"},published:{type:String,reflectToAttribute:!0},translator:{type:Object,notify:!0,value:function value(){return MyAppGlobals.translator}},papgePath:{type:String,value:"edit-articles"}}}}]);return cmsArticleItem}(_cmsLogin.cmsItemTemplate);_exports.cmsArticleItem=cmsArticleItem;customElements.define(cmsArticleItem.is,cmsArticleItem);var cmsArticleItem$1={cmsArticleItem:cmsArticleItem};_exports.$cmsArticleItem=cmsArticleItem$1;var Consts=new _cmsLogin.Setter;Consts.assets=Consts.getAssets("cms-articles");var cmsArticle=/*#__PURE__*/function(_cmsItemImageTemplate){babelHelpers.inherits(cmsArticle,_cmsItemImageTemplate);function cmsArticle(){babelHelpers.classCallCheck(this,cmsArticle);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(cmsArticle).apply(this,arguments))}babelHelpers.createClass(cmsArticle,[{key:"ready",value:function ready(){babelHelpers.get(babelHelpers.getPrototypeOf(cmsArticle.prototype),"ready",this).call(this);this.translator.target("cms-articles","setLangObject",this._setLObj.bind(this));this.translator.target("cms-articles","changeLang",this._setLang.bind(this),!1);this.translator.shoot("cms-articles","setLangObject")}},{key:"_setLObj",value:function _setLObj(res,querySnapshot){if("data"in querySnapshot){var langs=querySnapshot.data();res.call(this,langs)}}},{key:"_setLang",value:function _setLang(res,lang){this.lang=lang;res.call(this)}},{key:"__changeLang",value:function __changeLang(){this.lang=this.translator.lang;this.translator.changeLang.call(this)}},{key:"__publish",value:function __publish(data){console.log(data)}},{key:"_deleteImg",value:function _deleteImg(data){console.log(data)}},{key:"_getArticle",value:function _getArticle(data){return[data]}}],[{key:"_getStyles",get:function get(){return(0,_cmsLogin.html)(_templateObject3_b7bf7f8083c411e9b65ecdd08bafc34e())}},{key:"_getMenu",get:function get(){return(0,_cmsLogin.html)(_templateObject4_b7bf7f8083c411e9b65ecdd08bafc34e())}},{key:"_getItem",get:function get(){return(0,_cmsLogin.html)(_templateObject5_b7bf7f8083c411e9b65ecdd08bafc34e())}},{key:"is",get:function get(){return"cms-article"}},{key:"properties",get:function get(){return{lang:{type:String,notify:!0//observer: '__changeLang'
},langs:{type:Object,value:{}},translator:{type:Object,notify:!0,value:function value(){return MyAppGlobals.translator}},article:{type:Array,notify:!0},content:{type:Array,notify:!0,computed:"_getArticle(article)"}}}}]);return cmsArticle}(_cmsLogin.cmsItemImageTemplate);customElements.define(cmsArticle.is,cmsArticle);var cmsArticleView=/*#__PURE__*/function(_cmsMiddlePageTemplat){babelHelpers.inherits(cmsArticleView,_cmsMiddlePageTemplat);function cmsArticleView(){babelHelpers.classCallCheck(this,cmsArticleView);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(cmsArticleView).apply(this,arguments))}babelHelpers.createClass(cmsArticleView,[{key:"ready",value:function ready(){babelHelpers.get(babelHelpers.getPrototypeOf(cmsArticleView.prototype),"ready",this).call(this);this.translator.target("cms-article-view","setLangObject",this._setLObj.bind(this));this.translator.target("cms-article-view","changeLang",this._setLang.bind(this),!1);this.translator.shoot("cms-article-view","setLangObject");this.$.reset.addEventListener("click",this._removeInnerHTML.bind(this));window.addEventListener("reset",this._removeInnerHTML.bind(this))}},{key:"_setLObj",value:function _setLObj(res,querySnapshot){if("data"in querySnapshot){var langs=querySnapshot.data();res.call(this,langs)}}},{key:"_setLang",value:function _setLang(res,lang){this.lang=lang;res.call(this)}},{key:"__changeLang",value:function __changeLang(){this.lang=this.translator.lang;this.translator.changeLang.call(this)}},{key:"_routePageChanged",value:function _routePageChanged(routeData,query,active){if(!0===!!active&&!0===!!routeData.page&&"view-articles"===routeData.page){if("content"in query){this._setContent(query.content,query);console.log}}}},{key:"_setContent",value:function _setContent(cont,query){var content=JSON.parse(atob(cont)),info;info=content.info;content=content.content;if(!0===babelHelpers.instanceof(content,Array)){this.obj.items[0].type=query.type;this.obj.items[0].category=query.category;this.obj.info[0].author=this.user.displayName;var obj=btoa(JSON.stringify(this.obj));this.url="content/articles/add-articles?content=".concat(obj,"&add=true");this.set("contents",[]);this.set("contents",content);this.set("info",[]);this.set("info",info)}this.set("add","true"===query.add);this.slashed=!1}},{key:"_killSpinner",value:function _killSpinner(data){if(0<data.length&&0<this.childElementCount&&"spinner"===this.children[0].getAttribute("slot")){this.removeChild(this.children[0])}}},{key:"_removeInnerHTML",value:function _removeInnerHTML(){this.set("contents",[]);this.set("info",[]);this.set("add",!1);this.slashed=!0;window.onbeforeunload=function(){}}}],[{key:"_getShoutAnchor",get:function get(){return(0,_cmsLogin.html)(_templateObject6_b7bf7f8083c411e9b65ecdd08bafc34e())}},{key:"_getSilentAnchor",get:function get(){return(0,_cmsLogin.html)(_templateObject7_b7bf7f8083c411e9b65ecdd08bafc34e())}},{key:"_getTable",get:function get(){return(0,_cmsLogin.html)(_templateObject8_b7bf7f8083c411e9b65ecdd08bafc34e())}},{key:"_getNavside",get:function get(){return(0,_cmsLogin.html)(_templateObject9_b7bf7f8083c411e9b65ecdd08bafc34e())}},{key:"is",get:function get(){return"cms-article-view"}},{key:"properties",get:function get(){return{lang:{type:String,notify:!0,observer:"__changeLang"},langs:{type:Object,value:{}},translator:{type:Object,notify:!0,value:function value(){return MyAppGlobals.translator}},route:{type:Object,notify:!0},user:{type:Object,notify:!0},contents:{type:Array,notify:!0,value:[],observer:"_killSpinner"},hidebottom:{type:Boolean,value:!0,reflectToAttribute:!0},url:{type:String,notify:!0},obj:{type:Object,notify:!0,value:{contentText:[{description:""}],image:[],info:[{author:"",dateAdded:"",publishedBy:[{author:"",date:"",uid:""}],unPublishedBy:[{author:"",date:"",uid:""}]}],items:[{brand:"",category:"",lang:"",price:"",stock:"",title:"",type:""}]}}}}},{key:"observers",get:function get(){return["_routePageChanged(routeData, query, active)"]}}]);return cmsArticleView}(_cmsLogin.cmsMiddlePageTemplate);customElements.define(cmsArticleView.is,cmsArticleView)});