define(["../cms-login.js"],function(_cmsLogin){"use strict";function _templateObject5_78404740615e11eab834b97a903770ac(){var data=babelHelpers.taggedTemplateLiteral(["       \n            <h3 class=\"higherh3\">Projects</h3>       \n            <h5 class=\"higherh5\"> Active - [[appName]]  </h5> \n        "]);_templateObject5_78404740615e11eab834b97a903770ac=function _templateObject5_78404740615e11eab834b97a903770ac(){return data};return data}function _templateObject4_78404740615e11eab834b97a903770ac(){var data=babelHelpers.taggedTemplateLiteral(["            \n        <a href=\"[[rootPath]]settings/projects/add-project?&add=true\">\n            <div class=\"add-btn-group\" title=\"[[ADD]]\">\n                <div class=\"add-btn-group-item group-item-top-left\" ></div>\n\n                <div class=\"add-btn-group-item group-item-top-right\"></div>\n\n                <div class=\"add-btn-group-item group-item-bottom-left\"></div>\n\n                <div class=\"add-btn-group-item group-item-bottom-right\"></div>\n            </div>\n        </a>\n        "]);_templateObject4_78404740615e11eab834b97a903770ac=function _templateObject4_78404740615e11eab834b97a903770ac(){return data};return data}function _templateObject3_78404740615e11eab834b97a903770ac(){var data=babelHelpers.taggedTemplateLiteral(["<cms-page-list-item slot=\"item","\" .page=\"","\">\n                        </cms-page-list-item>"]);_templateObject3_78404740615e11eab834b97a903770ac=function _templateObject3_78404740615e11eab834b97a903770ac(){return data};return data}function _templateObject2_78404740615e11eab834b97a903770ac(){var data=babelHelpers.taggedTemplateLiteral([""," "]);_templateObject2_78404740615e11eab834b97a903770ac=function _templateObject2_78404740615e11eab834b97a903770ac(){return data};return data}function _templateObject_78404740615e11eab834b97a903770ac(){var data=babelHelpers.taggedTemplateLiteral(["<paper-spinner-lite active=\"false\" slot=\"spinner\">"]);_templateObject_78404740615e11eab834b97a903770ac=function _templateObject_78404740615e11eab834b97a903770ac(){return data};return data}var cmsProjects=/*#__PURE__*/function(_cmsMiddlePageTemplat){babelHelpers.inherits(cmsProjects,_cmsMiddlePageTemplat);function cmsProjects(){babelHelpers.classCallCheck(this,cmsProjects);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(cmsProjects).apply(this,arguments))}babelHelpers.createClass(cmsProjects,[{key:"connectedCallback",value:function connectedCallback(){babelHelpers.get(babelHelpers.getPrototypeOf(cmsProjects.prototype),"connectedCallback",this).call(this)}},{key:"disconnectedCallback",value:function disconnectedCallback(){babelHelpers.get(babelHelpers.getPrototypeOf(cmsProjects.prototype),"disconnectedCallback",this).call(this);//this._observer.disconnect();
}},{key:"ready",value:function ready(){babelHelpers.get(babelHelpers.getPrototypeOf(cmsProjects.prototype),"ready",this).call(this);this.spinner.active=!0/* ignoreName */ /* skipSlots */;this.translator.target("cms-page-list-type","setLangObject",this._setLObj.bind(this));this.translator.target("cms-page-list-type","changeLang",this._setLang.bind(this),/* ignoreName */!1/* skipSlots */ /* skipSlots */);this.translator.shoot("cms-page-list-type","setLangObject")}},{key:"_setLang",value:function _setLang(res,lang){this.lang=lang;res.call(this)}},{key:"_setLObj",value:function _setLObj(res,querySnapshot){if("data"in querySnapshot){var langs=querySnapshot.data();res.call(this,langs)}}},{key:"__changeLang",value:function __changeLang(){this.lang=this.translator.lang;this.translator.changeLang.call(this)}},{key:"_routePageChanged",value:function _routePageChanged(routeData,query){var _this=this;if("number"===typeof this.time)clearInterval(this.time);var reset="true"===query.reset;if(!query.reset){if("projects"===routeData.page){this.time=setTimeout(function(){if(0===_this.pages.length){// let projs = getProjects()
(0,_cmsLogin.afterNextRender)(_this,function(){//  projs.then(response => console.log(response))
_this.spinner.active=!1})}},120)}}/*else if (reset === true) {
        this.pages = [];
        this._contentChanged()
      }*/}},{key:"_contentChanged",value:function _contentChanged(){var _this2=this;if("number"===typeof this.time)clearTimeout(this.time);var spinnerTemplate=function spinnerTemplate(){return(0,_cmsLogin.html$2)(_templateObject_78404740615e11eab834b97a903770ac())};(0,_cmsLogin.render)(spinnerTemplate(),this);if("pages"===this.routeData.page&&"/pages"===this.route.path){this.time=setTimeout(function(){window.history.pushState({},null,"".concat(_this2.rootPath,"content/pages"));window.dispatchEvent(new CustomEvent("location-changed"))},500)}else{this.pages=[]}}},{key:"_setAll",value:function _setAll(response){var arr=[];this.pages=[];for(var i=0;i<response.length;i++){if(!!response[i].id){var datarr=response[i].data();arr.push(datarr)}}this.set("pages",arr)}},{key:"putElement",value:function putElement(data){var _this3=this;if("number"===typeof this.time)clearInterval(this.time);this.time=setTimeout(function(){var pageTemplate=function pageTemplate(pages){return(0,_cmsLogin.html$2)(_templateObject2_78404740615e11eab834b97a903770ac(),pages.map(function(article,idx){return(0,_cmsLogin.html$2)(_templateObject3_78404740615e11eab834b97a903770ac(),idx,article)}))};(0,_cmsLogin.render)(pageTemplate(data),_this3)},60)}}],[{key:"_getSilentAnchor",get:function get(){return(0,_cmsLogin.html)(_templateObject4_78404740615e11eab834b97a903770ac())}},{key:"_topLabel",get:function get(){return(0,_cmsLogin.html)(_templateObject5_78404740615e11eab834b97a903770ac())}},{key:"is",get:function get(){return"cms-projects"}},{key:"properties",get:function get(){return{lang:{type:String,observer:"__changeLang"},langs:{type:Object,value:{}},appName:{type:String,value:function value(){return firebase.app().name}},translator:{type:Object,notify:!0,value:function value(){return MyAppGlobals[window.cms];//MyAppGlobals.translator
}},pages:{type:Array,notify:!0,value:[],observer:"putElement"},spinner:{type:Object,value:function value(){return document.querySelector("#spinner")}}}}},{key:"observers",get:function get(){return["_routePageChanged(routeData, query)"]}}]);return cmsProjects}(_cmsLogin.cmsMiddlePageTemplate);customElements.define(cmsProjects.is,cmsProjects);function getProjects(){return _getProjects.apply(this,arguments)}function _getProjects(){_getProjects=babelHelpers.asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee(){var proj;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return(0,_cmsLogin.request)("http://127.0.0.1:8001/data/projects.json","GET").then(function(res){return res.text()}).then(function(res){proj=res});case 2:return _context.abrupt("return",proj);case 3:case"end":return _context.stop();}}},_callee)}));return _getProjects.apply(this,arguments)}function changeProject(config,projectID){var newProject=firebase.initializeApp(config,projectID);return newProject.name}});